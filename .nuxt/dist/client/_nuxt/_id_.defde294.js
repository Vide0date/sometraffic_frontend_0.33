import{H as T,T as E,M}from"./components.20f386c7.js";import{_ as j}from"./Loader.226b6330.js";import{l as q,$ as C,a as $,r as F,b as H,w as x,e as b,u as n,c as L,f as R,h as S,i as p,j as r,O as V,o as _,m as D,t as I}from"./entry.93ad8c8d.js";import{u as A}from"./fetch.192030a7.js";import"./composables.89cb5ece.js";const O={class:"w-screen h-screen rounded-xl p-8 flex justify-center m-auto"},U={class:"space-y-8 flex justify-center m-auto object-center"},W={key:0,class:"inline-flex tracking"},Q={__name:"[id]",async setup(G){var g,m;let a,c;const i=q();C();const l=$(),d=i.params,P=i.query,o=F([]),B=H({redirect_flaq:!1}),f=l.BASE_URL+i.fullPath,u=f.split("?")[0];if(console.log("Full Path: ",f),d.id&&d.id.length===7){P.fbclid?console.log("Save it."):(console.log("Redirect it or show preview or do nothing."),[a,c]=x(()=>A(`${l.API_BASE_URL}trackingurl/get-meta`,{method:"POST",body:{tracking_url:u}},"$Yr6aDRXGgk").then(e=>{e.data.value&&(o.value=e.data.value),e.error.value&&console.log("Error no result",e.error)}).catch(e=>{console.log("Error useFetch: ",e)})),await a,c()),console.log("Redirect: ",o);const h=(g=window==null?void 0:window.screen)==null?void 0:g.width,v=(m=window==null?void 0:window.screen)==null?void 0:m.height;let s="";if(navigator.connection){const t=navigator.connection.downlink;s=t+" Mbps",console.log("Internet speed is "+t+" Mbps")}else console.log("navigator.connection is not available");[a,c]=x(()=>A(`${l.API_BASE_URL}trackingurl/redirect`,{method:"POST",body:{id:d.id,tracking_url:u,screen_resolution:h+"x"+v,network_speed:s,referrer_url:document.referrer}},"$PNCP5poDuj").then(e=>{if(e.data.value){o.value=e.data.value.redirect;let t=e.data.value.destination_url;(!t.includes("http")||!t.includes("http"))&&(t="https://"+t),window.location.assign(t)}e.error.value&&(console.log("error value1",e.error.value.data.message),AWN.alert(error))}).catch(e=>{AWN.alert(e)})),await a,c()}return(h,v)=>{var w;const s=E,e=M,t=T,N=j;return _(),b(V,null,[((w=n(o))==null?void 0:w.length)>0?(_(),L(t,{key:0},{default:R(()=>{var y;return[r(s,null,{default:R(()=>{var k;return[D("Some Traffic | "+I((k=n(o)[0])==null?void 0:k.seo_title),1)]}),_:1}),r(e,{property:"og:title",content:(y=n(o)[0])==null?void 0:y.seo_title},null,8,["content"]),r(e,{property:"og:description",content:n(o)[0].seo_description},null,8,["content"]),r(e,{property:"og:image",content:n(o)[0].seo_image_url},null,8,["content"]),r(e,{property:"og:url",content:n(u)},null,8,["content"]),r(e,{property:"og:type",content:"Some traffic web app"})]}),_:1})):S("",!0),p("div",null,[p("div",O,[p("div",U,[n(B).redirect_flaq==!0?(_(),b("span",W,[r(N)])):S("",!0)])])])],64)}}};export{Q as default};

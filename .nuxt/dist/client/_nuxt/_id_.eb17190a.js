import{H as A,T as j,M as q}from"./components.d7c131b0.js";import{_ as C}from"./Loader.5c797e24.js";import{l as F,a0 as N,a as D,r as k,b as L,w,S as M,e as x,u as o,c as V,f as S,h as P,i as _,j as n,P as $,o as p,m as H,t as U}from"./entry.e91fe887.js";import{u as R}from"./fetch.299fd6b5.js";import"./composables.f0c4264f.js";const I={class:"w-screen h-screen rounded-xl p-8 flex justify-center m-auto"},O={class:"space-y-8 flex justify-center m-auto object-center"},G={key:0,class:"inline-flex tracking"},W={__name:"[id]",async setup(X){let c,s;const l=F();N();const i=D(),u=l.params,f=l.query,t=k([]),m=k(""),b=L({redirect_flaq:!1}),g=i.BASE_URL+l.fullPath,d=g.split("?")[0];return console.log("Full Path: ",g),u.id&&u.id.length===7&&(f.fbclid?console.log("Save it."):(console.log("Redirect it or show preview or do nothing."),[c,s]=w(()=>R(`${i.API_BASE_URL}trackingurl/get-meta`,{method:"POST",body:{tracking_url:d}},"$Yr6aDRXGgk").then(e=>{e.data.value&&(t.value=e.data.value,m.value=e.data.value[0].destination_url),e.error.value&&console.log("Error no result",e.error)}).catch(e=>{console.log("Error useFetch: ",e)})),await c,s(),[c,s]=w(()=>R(`${i.API_BASE_URL}trackingurl/redirect`,{method:"POST",body:{id:u.id,tracking_url:d,screen_resolution:"unknownxunknown",network_speed:"",referrer_url:f.fbclid?"https://facebook.com":""}},"$PNCP5poDuj").then(e=>{if(e.data.value){console.log("Destination: ",e.data.value.destination_url),t.value=e.data.value.redirect;let a=e.data.value.destination_url;(!a.includes("http")||!a.includes("http"))&&(a="https://"+a)}e.error.value&&console.log("Error no result",e.error)}).catch(e=>{console.log("Error useFetch: ",e)})),await c,s()),console.log("Redirect: ",t)),M(()=>{window.location.assign(m.value)}),(e,a)=>{var h;const E=j,r=q,B=A,T=C;return p(),x($,null,[((h=o(t))==null?void 0:h.length)>0?(p(),V(B,{key:0},{default:S(()=>{var v;return[n(E,null,{default:S(()=>{var y;return[H("Some Traffic | "+U((y=o(t)[0])==null?void 0:y.seo_title),1)]}),_:1}),n(r,{property:"og:title",content:(v=o(t)[0])==null?void 0:v.seo_title},null,8,["content"]),n(r,{property:"og:description",content:o(t)[0].seo_description},null,8,["content"]),n(r,{property:"og:image",content:o(t)[0].seo_image_url},null,8,["content"]),n(r,{property:"og:url",content:o(d)},null,8,["content"]),n(r,{property:"og:type",content:"Some traffic web app"})]}),_:1})):P("",!0),_("div",null,[_("div",I,[_("div",O,[o(b).redirect_flaq==!0?(p(),x("span",G,[n(T)])):P("",!0)])])])],64)}}};export{W as default};

{"version":3,"file":"_id_-6b82f2b6.js","sources":["../../../../pages/projects/[id].vue"],"sourcesContent":["<template>\n      <div id=\"last-tracking-url\">\n  \n        <form @submit.prevent=\"updateProject\">\n          <div class=\"flex justify-between\">\n            <h1 class=\"font-bold py-4 capitalize\">Edit a project</h1>\n  \n            <button\n              type=\"submit\"\n              class=\"bg-[#bcbcbc] inline-flex justify-center rounded-md border border-transparent pt-4 px-4 text-sm font-medium text-black shadow-sm hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\"\n            >\n             Edit project\n            </button>\n          </div>\n  \n          <div class=\"overflow-hidden shadow sm:rounded-md\">\n            <div class=\"px-4 py-5 sm:p-6\">\n              <div class=\"col-span-12\">\n                <div class=\"grid grid-cols-12\">\n                  <div\n                    class=\"col-span-1 flex items-center text-sm font-medium text-gray-700\"\n                  >\n                    ID\n                  </div>\n                  <div class=\"col-span-5 pr-4\">\n                    <input\n                      type=\"text\"\n                      v-model=\"form.unique_identifier\"\n                      :disabled=\"form.unique_identifier\"\n                      id=\"item_id\"\n                      class=\"bg-[#dddddd] disabled:bg-gray-300 disabled:text-gray-500 h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\n                      required\n                    />\n                  </div>\n                  <div\n                    class=\"col-span-1 flex items-center text-sm font-medium text-gray-700\"\n                  >\n                    Created at\n                  </div>\n                  <div class=\"col-span-5 pl-4\">\n                    <input\n                      type=\"text\"\n                      :value=\"formatDate(form.createdAt, 'YYYY-MM-DD HH:mm')\"\n                      disabled\n                      id=\"timestamp\"\n                      class=\"bg-[#dddddd] disabled:bg-gray-300 disabled:text-gray-500 h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\n                      required\n                    />\n                  </div>\n                </div>\n\n              </div>\n  \n              <div class=\"flex flex-row mt-4\">\n                <div class=\"basis-1/2 pr-1.5\">\n                  <div class=\"col-span-12\">\n                    <div class=\"grid grid-cols-12\">\n                      <div\n                        class=\"col-span-3 flex items-center text-sm font-medium text-gray-700\"\n                      >\n                        Updated at\n                      </div>\n                      <div class=\"col-span-9\">\n                        <input\n                          type=\"text\"\n                          v-model=\"form.timestamp\"\n                          :disabled=\"form.timestamp\"\n                          id=\"timestamp\"\n                          class=\"disabled:bg-gray-300 disabled:text-gray-500 bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\n                          required\n                        />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"basis-1/2 pl-1.5\">\n                  <div class=\"col-span-12\">\n                    <div class=\"grid grid-cols-12\">\n                      <div\n                        class=\"col-span-3 flex items-center text-sm font-medium text-gray-700\"\n                      >\n                        Created By\n                      </div>\n                      <div class=\"col-span-9\">\n                        <input\n                          type=\"text\"\n                          v-model=\"form.createdBy\"\n                          :disabled=\"form.createdBy\"\n                          id=\"username\"\n                          class=\"bg-[#dddddd] disabled:bg-gray-300 disabled:text-gray-500 h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\n                          required\n                        />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              \n\n              <div class=\"col-span-12 mt-4\">\n                <div class=\"grid grid-cols-12\">\n                  <div\n                    class=\"col-span-3 flex items-center text-sm font-medium text-gray-700\"\n                  >\n                    Project name *\n                  </div>\n                  <div class=\"col-span-3\">\n                    <input\n                      placeholder=\"Need to enter account name (obligatory)\"\n                      type=\"text\"\n                      v-model=\"form.name\"\n                      id=\"name\"\n                      class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\n                      required\n                    />\n                  </div>\n                  <div v-if=\"JSON.parse(user).userType == 'Administrator'\" class=\"col-span-6 pl-4\">\n                  <div class=\"col-span-12\">\n                    <div class=\"grid grid-cols-12\">\n                      <div\n                        class=\"col-span-3 flex items-center text-sm font-medium text-gray-700\"\n                      >\n                        Account\n                      </div>\n                      <div class=\"col-span-9\">\n                        <input\n                          type=\"text\"\n                          :value=\"form.createdBy\"\n                          :disabled=\"form.createdBy\"\n                          id=\"username\"\n                          class=\"bg-[#dddddd] disabled:bg-gray-300 disabled:text-gray-500 h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\n                          required\n                        />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                </div>\n              </div>\n  \n              <div class=\"col-span-12 sm:col-span-12 mt-4\">\n                <div\n                  class=\"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-1 xl:grid-cols-12 gap-4 gap-x-4\"\n                >\n                  <div class=\"col-span-12 sm:col-span-12\">\n                    <label\n                      for=\"description\"\n                      class=\"block text-sm font-medium text-gray-700\"\n                      >Description</label\n                    >\n                    <textarea\n                      v-model=\"form.description\"\n                      rows=\"6\"\n                      id=\"description\"\n                      class=\"bg-[#dddddd] py-2 px-3 text-gray-900 mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\n                      placeholder=\"(free text field, 1000 characters max, about 30 sentenses max) what is the goal of this item or project\"\n                    ></textarea>\n                  </div>\n                </div>\n              </div>\n              </div>\n  \n            <!-- <div class=\"px-4 py-3 text-right sm:px-6 w-full sm:w-full\">\n              <button\n                type=\"submit\"\n                class=\"bg-[#bcbcbc] inline-flex justify-center rounded-md border border-transparent py-2 px-4 text-sm font-medium text-black shadow-sm hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\"\n              >\n                Create category item\n              </button>\n            </div> -->\n          </div>\n        </form>\n      </div>\n  </template>\n  \n  <script setup>\n  import moment from \"moment-timezone\"\n  const emit = defineEmits(['projectsChanged'])\n  definePageMeta({\n    middleware: [\"auth\"],\n  })\n  \n  const AWN = inject(\"$awn\")\n  const config = useRuntimeConfig()\n  const { id } = await useRoute().params\n  \n  let timestamp = ref(new Date().toLocaleTimeString())\n  let user = localStorage.getItem(\"user\")\n  const activeAccount = ref(\n  localStorage.getItem(\"activeAccount\")\n)\n\n  const clickdatas = ref([])\n  const uniqueUrl = ref(\"\")\n  const isLoading = ref(false)\n  \n  setInterval(() => {\n    timestamp.value = new Date().toLocaleTimeString()\n  }, 10)\n  \n  const form = reactive({\n    createdBy: \"\",\n    createdAt: \"\",\n    timestamp,\n    unique_identifier: \"\",\n    description: \"\",\n    name: \"\",\n    id: \"\"\n  })\n  \n  \n  const { data: project } = await useFetch(\n    `${config.API_BASE_URL}projects/identifier/${id}`,\n    { key: id }\n  )\n  \n  if (project.value) {\n    form.id = project.value.id\n    form.name = project.value.name\n    form.createdBy = project.value.createdBy;\n    form.unique_identifier = project.value.unique_identifier\n    form.description = project.value.description\n    form.createdAt = project.value.createdAt\n  }\n  \n  const formatDate = (dateString, formatString) => {\n    const date = new Date(dateString)\n    return moment(date).format(formatString)\n  }\n  \n  const updateProject = async () => {\n    const u_data = {\n      AccountId: activeAccount.value,\n      id: form.id,\n      name: form.name,\n      unique_identifier: form.unique_identifier,\n      description: form.description,\n      createdBy: form.createdBy,\n    }\n  \n    const { data, error } = await useFetch(\n      `${config.API_BASE_URL}projects/update/${id}`,\n      {\n        method: \"PUT\",\n        body: u_data,\n      }\n    )\n    if (data.value) {\n      await AWN.success(data.value.message)\n      navigateTo(\"/projects\").then(()=>{\n          const router = useRouter()\n          router.go(\"/projects\")\n      })\n    }\n    if (error.value) {\n      await AWN.alert(error.value.statusMessage)\n    }\n  }\n  \n  \n  const setLoading = () => {\n    isLoading.value = true\n  }\n  \n  const copy = async (id) => {\n    // Get the text field\n    var copyText = document.getElementById(id)\n  \n    // Select the text field\n    copyText.select()\n    copyText.setSelectionRange(0, 99999) // For mobile devices\n  \n    // Copy the text inside the text field\n    navigator.clipboard.writeText(copyText.value)\n    await AWN.success(copyText.value + \" copied to clipboard!\")\n    // Alert the copied text\n    //alert(\"Copied the text: \" + copyText.value);\n  }\n  \n  </script>\n  \n  <script>\n  export default {\n    data() {\n      return {\n        tab: 1,\n      }\n    },\n    methods: {\n      activeTabOne() {\n        this.tab = 1\n      },\n      activeTabTwo() {\n        this.tab = 2\n      },\n      activeTabThree() {\n        this.tab = 3\n      },\n      activeTabFour() {\n        this.tab = 4\n      },\n    },\n  }\n  </script>\n  \n  <style>\n  input:checked {\n    background-color: #22c55e; /* bg-green-500 */\n  }\n  \n  input:checked ~ span:last-child {\n    --tw-translate-x: 1.75rem; /* translate-x-7 */\n  }\n  .valid {\n    border: 3px solid green;\n  }\n  \n  .invalid {\n    border: 3px solid red;\n  }\n  \n  #awn-popup-wrapper {\n    display: none !important;\n  }\n  \n  .input-w-loading {\n    width: 90%;\n  }\n  img.loading {\n    width: 50px;\n    display: inline-block;\n    margin-left: 10px;\n  }\n  \n  #tasks_list h1,\n  table tbody tr td {\n    color: #000;\n  }\n  </style>\n  \n  <style>\n  .modal-vue3-header,\n  .modal-vue3-body .text {\n    color: #000 !important;\n  }\n  \n  .confirm-modal > div > .modal-vue3-content {\n    /* background: red; */\n    /* display: none !important; */\n  }\n  </style>\n  "],"names":["_withAsyncContext"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AA2RA,MAAA,cAAA;AAAA,EACA,OAAA;AACA,WAAA;AAAA,MACA,KAAA;AAAA,IACA;AAAA,EACA;AAAA,EACA,SAAA;AAAA,IACA,eAAA;AACA,WAAA,MAAA;AAAA,IACA;AAAA,IACA,eAAA;AACA,WAAA,MAAA;AAAA,IACA;AAAA,IACA,iBAAA;AACA,WAAA,MAAA;AAAA,IACA;AAAA,IACA,gBAAA;AACA,WAAA,MAAA;AAAA,IACA;AAAA,EACA;AACA;;;;;;;AAxHA,WAAA,MAAA;AACA,UAAA,SAAA,iBAAA;AACA,UAAA,EAAA,GAAA,KAAuB,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAA,SAAA,EAAA,MAAA;AAEvB,QAAA,YAAA,IAAA,IAAA,KAAA,EAAA,mBAAA,CAAA;AACA,QAAA,OAAA,aAAA,QAAA,MAAA;AACA;AAAA,MACA,aAAA,QAAA,eAAA;AAAA,IACA;AAEA,QAAA,CAAA,CAAA;AACA,QAAA,EAAA;AACA,QAAA,KAAA;AAEA,gBAAA,MAAA;AACA,gBAAA,QAAA,IAAA,KAAA,EAAA,mBAAA;AAAA,IACA,GAAA,EAAA;AAEA,UAAA,OAAA,SAAA;AAAA,MACA,WAAA;AAAA,MACA,WAAA;AAAA,MACA;AAAA,MACA,mBAAA;AAAA,MACA,aAAA;AAAA,MACA,MAAA;AAAA,MACA,IAAA;AAAA,IACA,CAAA;AAGA,UAAA,EAAA,MAAA,QAAA,KAAkC,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAA;AAAA,MAClC,GAAA,OAAA,mCAAA;AAAA,MACA,EAAA,KAAA,GAAA;AAAA,MACA;AAAA,IAAA,CAAA;AAEA,QAAA,QAAA,OAAA;AACA,WAAA,KAAA,QAAA,MAAA;AACA,WAAA,OAAA,QAAA,MAAA;AACA,WAAA,YAAA,QAAA,MAAA;AACA,WAAA,oBAAA,QAAA,MAAA;AACA,WAAA,cAAA,QAAA,MAAA;AACA,WAAA,YAAA,QAAA,MAAA;AAAA,IACA;AAEA,UAAA,aAAA,CAAA,YAAA,iBAAA;AACA,YAAA,OAAA,IAAA,KAAA,UAAA;AACA,aAAA,OAAA,IAAA,EAAA,OAAA,YAAA;AAAA,IACA;;;;;;;;;;;;;;;;;;"}
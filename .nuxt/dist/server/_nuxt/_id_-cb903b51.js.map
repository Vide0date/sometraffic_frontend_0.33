{"version":3,"file":"_id_-cb903b51.js","sources":["../../../../pages/accounts/[id].vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div id=\"last-tracking-url\">\r\n\r\n      <form @submit.prevent=\"updateAccount\">\r\n        <div class=\"flex justify-between\">\r\n          <h1 class=\"font-bold py-4 capitalize\">Update the account</h1>\r\n\r\n          <button\r\n            type=\"submit\"\r\n            class=\"bg-[#bcbcbc] inline-flex justify-center rounded-md border border-transparent pt-4 px-4 text-sm font-medium text-black shadow-sm hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\"\r\n          >\r\n           Update account\r\n          </button>\r\n        </div>\r\n\r\n        <div class=\"overflow-hidden shadow sm:rounded-md\">\r\n          <div class=\"px-4 py-5 sm:p-6\">\r\n            <div class=\"col-span-12\">\r\n              <div class=\"grid grid-cols-12\">\r\n                <div\r\n                  class=\"col-span-1 flex items-center text-sm font-medium text-gray-700\"\r\n                >\r\n                  ID\r\n                </div>\r\n                <div class=\"col-span-3\">\r\n                  <input\r\n                    type=\"text\"\r\n                    v-model=\"form.unique_identifier\"\r\n                    :disabled=\"form.unique_identifier\"\r\n                    id=\"unique_identifier\"\r\n                    class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\r\n                    required\r\n                  />\r\n                </div>\r\n                <div class=\"col-span-6\">\r\n                    <div class=\"grid grid-cols-12 px-4\">\r\n                    <div\r\n                      class=\"col-span-3 flex items-center text-sm font-medium text-gray-700\"\r\n                    >\r\n                      Updated\r\n                    </div>\r\n                    <div class=\"col-span-9\">\r\n                      <input\r\n                        type=\"text\"\r\n                        v-model=\"form.timestamp\"\r\n                        :disabled=\"form.timestamp\"\r\n                        id=\"timestamp\"\r\n                        class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\r\n                        required\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                    </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"flex flex-row mt-4\">\r\n              <div class=\"basis-1/2 pr-1.5\">\r\n                <div class=\"col-span-12\">\r\n                  <div class=\"grid grid-cols-12\">\r\n                    <div\r\n                      class=\"col-span-3 flex items-center text-sm font-medium text-gray-700\"\r\n                    >\r\n                      Created\r\n                    </div>\r\n                    <div class=\"col-span-9\">\r\n                      <input\r\n                        type=\"text\"\r\n                        :value=\"formatDate(form.createdAt, 'YYYY-MM-DD HH:mm')\"\r\n                        disabled\r\n                        id=\"timestamp\"\r\n                        class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\r\n                        required\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"basis-1/2 pl-1.5\">\r\n                <div class=\"col-span-12\">\r\n                  <div class=\"grid grid-cols-12\">\r\n                    <div\r\n                      class=\"col-span-3 flex items-center text-sm font-medium text-gray-700\"\r\n                    >\r\n                      Created By\r\n                    </div>\r\n                    <div class=\"col-span-9\">\r\n                      <input\r\n                        type=\"text\"\r\n                        v-model=\"form.createdBy\"\r\n                        :disabled=\"form.createdBy\"\r\n                        id=\"createdBy\"\r\n                        class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\r\n                        required\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"col-span-12 mt-4\">\r\n              <div class=\"grid grid-cols-12\">\r\n                <div\r\n                  class=\"col-span-3 flex items-center text-sm font-medium text-gray-700\"\r\n                >\r\n                  Account name *\r\n                </div>\r\n                <div class=\"col-span-9\">\r\n                  <input\r\n                    placeholder=\"Need to enter account name (obligatory)\"\r\n                    type=\"text\"\r\n                    v-model=\"form.name\"\r\n                    id=\"item_title\"\r\n                    class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\r\n                    required\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"col-span-12 sm:col-span-12 mt-4\">\r\n              <div\r\n                class=\"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-1 xl:grid-cols-12 gap-4 gap-x-4\"\r\n              >\r\n                <div class=\"col-span-12 sm:col-span-12\">\r\n                  <label\r\n                    for=\"description\"\r\n                    class=\"block text-sm font-medium text-gray-700\"\r\n                    >Description</label\r\n                  >\r\n                  <textarea\r\n                    v-model=\"form.description\"\r\n                    rows=\"6\"\r\n                    id=\"description\"\r\n                    class=\"bg-[#dddddd] py-2 px-3 text-gray-900 mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\r\n                    placeholder=\"(free text field, 1000 characters max, about 30 sentenses max) what is the goal of this item or project\"\r\n                  ></textarea>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport moment from \"moment-timezone\"\r\n\r\ndefinePageMeta({\r\n  middleware: [\"auth\"],\r\n})\r\n\r\nconst AWN = inject(\"$awn\")\r\nconst config = useRuntimeConfig()\r\nconst { id } = await useRoute().params\r\n\r\nlet timestamp = ref(new Date().toLocaleTimeString())\r\nlet local_data = localStorage.getItem(\"user\")\r\n\r\nconst clickdatas = ref([])\r\nconst uniqueUrl = ref(\"\")\r\nconst isLoading = ref(false)\r\n\r\nsetInterval(() => {\r\n  timestamp.value = new Date().toLocaleTimeString()\r\n}, 10)\r\n\r\nconst form = reactive({\r\n  createdBy: \"\",\r\n  createdAt: \"\",\r\n  timestamp,\r\n  unique_identifier: \"\",\r\n  description: \"\",\r\n  name: \"\",\r\n  id: \"\"\r\n})\r\n\r\n\r\nconst { data: account } = await useFetch(\r\n  `${config.API_BASE_URL}accounts/identifier/${id}`,\r\n  { key: id }\r\n)\r\n\r\nif (account.value) {\r\n  form.id = account.value.id\r\n  form.name = account.value.name\r\n  form.createdBy = account.value.createdBy;\r\n  form.unique_identifier = account.value.unique_identifier\r\n  form.description = account.value.description\r\n  form.createdAt = account.value.createdAt\r\n}\r\n\r\nconst formatDate = (dateString, formatString) => {\r\n  const date = new Date(dateString)\r\n  return moment(date).format(formatString)\r\n}\r\n\r\nconst updateAccount = async () => {\r\n  const u_data = {\r\n    id: form.id,\r\n    name: form.name,\r\n    unique_identifier: form.unique_identifier,\r\n    description: form.description,\r\n    createdBy: form.createdBy,\r\n    timestamp: new Date(),\r\n  }\r\n\r\n  const { data, error } = await useFetch(\r\n    `${config.API_BASE_URL}accounts/update/${id}`,\r\n    {\r\n      method: \"PUT\",\r\n      body: u_data,\r\n    }\r\n  )\r\n  if (data.value) {\r\n    console.log(\"data value\", data.value.message)\r\n    await AWN.success(data.value.message)\r\n    navigateTo(\"/accounts\")\r\n  }\r\n  if (error.value) {\r\n    await AWN.alert(error.value.statusMessage)\r\n  }\r\n}\r\n\r\nconst checkUrl = async (link) => {\r\n  isLoading.value = true\r\n  if (isValidUrl(link)) {\r\n    AWN.asyncBlock(\r\n      useFetch(`${config.API_BASE_URL}category-items/all/?url=${link}`),\r\n      (resp) => {\r\n        isLoading.value = false\r\n        if (resp.data && resp.data.value.length) {\r\n          uniqueUrl.value = \"invalid\"\r\n        } else {\r\n          uniqueUrl.value = \"valid\"\r\n        }\r\n      }\r\n    )\r\n  }\r\n}\r\n\r\nconst setLoading = () => {\r\n  isLoading.value = true\r\n}\r\n\r\nconst copy = async (id) => {\r\n  // Get the text field\r\n  var copyText = document.getElementById(id)\r\n\r\n  // Select the text field\r\n  copyText.select()\r\n  copyText.setSelectionRange(0, 99999) // For mobile devices\r\n\r\n  // Copy the text inside the text field\r\n  navigator.clipboard.writeText(copyText.value)\r\n  await AWN.success(copyText.value + \" copied to clipboard!\")\r\n  // Alert the copied text\r\n  //alert(\"Copied the text: \" + copyText.value);\r\n}\r\n\r\n</script>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      tab: 1,\r\n    }\r\n  },\r\n  methods: {\r\n    activeTabOne() {\r\n      this.tab = 1\r\n    },\r\n    activeTabTwo() {\r\n      this.tab = 2\r\n    },\r\n    activeTabThree() {\r\n      this.tab = 3\r\n    },\r\n    activeTabFour() {\r\n      this.tab = 4\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\ninput:checked {\r\n  background-color: #22c55e; /* bg-green-500 */\r\n}\r\n\r\ninput:checked ~ span:last-child {\r\n  --tw-translate-x: 1.75rem; /* translate-x-7 */\r\n}\r\n.valid {\r\n  border: 3px solid green;\r\n}\r\n\r\n.invalid {\r\n  border: 3px solid red;\r\n}\r\n\r\n#awn-popup-wrapper {\r\n  display: none !important;\r\n}\r\n\r\n.input-w-loading {\r\n  width: 90%;\r\n}\r\nimg.loading {\r\n  width: 50px;\r\n  display: inline-block;\r\n  margin-left: 10px;\r\n}\r\n\r\n#tasks_list h1,\r\ntable tbody tr td {\r\n  color: #000;\r\n}\r\n</style>\r\n\r\n<style>\r\n.modal-vue3-header,\r\n.modal-vue3-body .text {\r\n  color: #000 !important;\r\n}\r\n\r\n.confirm-modal > div > .modal-vue3-content {\r\n  /* background: red; */\r\n  /* display: none !important; */\r\n}\r\n</style>\r\n"],"names":["_withAsyncContext"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AA4QA,MAAA,cAAA;AAAA,EACA,OAAA;AACA,WAAA;AAAA,MACA,KAAA;AAAA,IACA;AAAA,EACA;AAAA,EACA,SAAA;AAAA,IACA,eAAA;AACA,WAAA,MAAA;AAAA,IACA;AAAA,IACA,eAAA;AACA,WAAA,MAAA;AAAA,IACA;AAAA,IACA,iBAAA;AACA,WAAA,MAAA;AAAA,IACA;AAAA,IACA,gBAAA;AACA,WAAA,MAAA;AAAA,IACA;AAAA,EACA;AACA;;;;;;AAnIA,WAAA,MAAA;AACA,UAAA,SAAA,iBAAA;AACA,UAAA,EAAA,GAAA,KAAqB,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAA,SAAA,EAAA,MAAA;AAErB,QAAA,YAAA,IAAA,IAAA,KAAA,EAAA,mBAAA,CAAA;AACA,iBAAA,QAAA,MAAA;AAEA,QAAA,EAAA;AACA,QAAA,EAAA;AACA,QAAA,KAAA;AAEA,gBAAA,MAAA;AACA,gBAAA,QAAA,IAAA,KAAA,EAAA,mBAAA;AAAA,IACA,GAAA,EAAA;AAEA,UAAA,OAAA,SAAA;AAAA,MACA,WAAA;AAAA,MACA,WAAA;AAAA,MACA;AAAA,MACA,mBAAA;AAAA,MACA,aAAA;AAAA,MACA,MAAA;AAAA,MACA,IAAA;AAAA,IACA,CAAA;AAGA,UAAA,EAAA,MAAA,QAAA;MACA,GAAA,OAAA,mCAAA;AAAA,MACA,EAAA,KAAA,GAAA;AAAA,MACA;AAAA,IAAA,CAAA;AAEA,QAAA,QAAA,OAAA;AACA,WAAA,KAAA,QAAA,MAAA;AACA,WAAA,OAAA,QAAA,MAAA;AACA,WAAA,YAAA,QAAA,MAAA;AACA,WAAA,oBAAA,QAAA,MAAA;AACA,WAAA,cAAA,QAAA,MAAA;AACA,WAAA,YAAA,QAAA,MAAA;AAAA,IACA;AAEA,UAAA,aAAA,CAAA,YAAA,iBAAA;AACA,YAAA,OAAA,IAAA,KAAA,UAAA;AACA,aAAA,OAAA,IAAA,EAAA,OAAA,YAAA;AAAA,IACA;;;;;;;;;;;;"}
{"version":3,"file":"_id_-cb903b51.js","sources":["../../../../pages/accounts/[id].vue"],"sourcesContent":["<template>\n  <div>\n    <div id=\"last-tracking-url\">\n\n      <form @submit.prevent=\"updateAccount\">\n        <div class=\"flex justify-between\">\n          <h1 class=\"font-bold py-4 capitalize\">Update the account</h1>\n\n          <button\n            type=\"submit\"\n            class=\"bg-[#bcbcbc] inline-flex justify-center rounded-md border border-transparent pt-4 px-4 text-sm font-medium text-black shadow-sm hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\"\n          >\n           Update account\n          </button>\n        </div>\n\n        <div class=\"overflow-hidden shadow sm:rounded-md\">\n          <div class=\"px-4 py-5 sm:p-6\">\n            <div class=\"col-span-12\">\n              <div class=\"grid grid-cols-12\">\n                <div\n                  class=\"col-span-1 flex items-center text-sm font-medium text-gray-700\"\n                >\n                  ID\n                </div>\n                <div class=\"col-span-3\">\n                  <input\n                    type=\"text\"\n                    v-model=\"form.unique_identifier\"\n                    :disabled=\"form.unique_identifier\"\n                    id=\"unique_identifier\"\n                    class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\n                    required\n                  />\n                </div>\n                <div class=\"col-span-6\">\n                    <div class=\"grid grid-cols-12 px-4\">\n                    <div\n                      class=\"col-span-3 flex items-center text-sm font-medium text-gray-700\"\n                    >\n                      Updated\n                    </div>\n                    <div class=\"col-span-9\">\n                      <input\n                        type=\"text\"\n                        v-model=\"form.timestamp\"\n                        :disabled=\"form.timestamp\"\n                        id=\"timestamp\"\n                        class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\n                        required\n                      />\n                    </div>\n                  </div>\n\n                    </div>\n              </div>\n            </div>\n\n            <div class=\"flex flex-row mt-4\">\n              <div class=\"basis-1/2 pr-1.5\">\n                <div class=\"col-span-12\">\n                  <div class=\"grid grid-cols-12\">\n                    <div\n                      class=\"col-span-3 flex items-center text-sm font-medium text-gray-700\"\n                    >\n                      Created\n                    </div>\n                    <div class=\"col-span-9\">\n                      <input\n                        type=\"text\"\n                        :value=\"formatDate(form.createdAt, 'YYYY-MM-DD HH:mm')\"\n                        disabled\n                        id=\"timestamp\"\n                        class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\n                        required\n                      />\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div class=\"basis-1/2 pl-1.5\">\n                <div class=\"col-span-12\">\n                  <div class=\"grid grid-cols-12\">\n                    <div\n                      class=\"col-span-3 flex items-center text-sm font-medium text-gray-700\"\n                    >\n                      Created By\n                    </div>\n                    <div class=\"col-span-9\">\n                      <input\n                        type=\"text\"\n                        v-model=\"form.createdBy\"\n                        :disabled=\"form.createdBy\"\n                        id=\"createdBy\"\n                        class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\n                        required\n                      />\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"col-span-12 mt-4\">\n              <div class=\"grid grid-cols-12\">\n                <div\n                  class=\"col-span-3 flex items-center text-sm font-medium text-gray-700\"\n                >\n                  Account name *\n                </div>\n                <div class=\"col-span-9\">\n                  <input\n                    placeholder=\"Need to enter account name (obligatory)\"\n                    type=\"text\"\n                    v-model=\"form.name\"\n                    id=\"item_title\"\n                    class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\n                    required\n                  />\n                </div>\n              </div>\n            </div>\n\n            <div class=\"col-span-12 sm:col-span-12 mt-4\">\n              <div\n                class=\"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-1 xl:grid-cols-12 gap-4 gap-x-4\"\n              >\n                <div class=\"col-span-12 sm:col-span-12\">\n                  <label\n                    for=\"description\"\n                    class=\"block text-sm font-medium text-gray-700\"\n                    >Description</label\n                  >\n                  <textarea\n                    v-model=\"form.description\"\n                    rows=\"6\"\n                    id=\"description\"\n                    class=\"bg-[#dddddd] py-2 px-3 text-gray-900 mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\n                    placeholder=\"(free text field, 1000 characters max, about 30 sentenses max) what is the goal of this item or project\"\n                  ></textarea>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport moment from \"moment-timezone\"\n\ndefinePageMeta({\n  middleware: [\"auth\"],\n})\n\nconst AWN = inject(\"$awn\")\nconst config = useRuntimeConfig()\nconst { id } = await useRoute().params\n\nlet timestamp = ref(new Date().toLocaleTimeString())\nlet local_data = localStorage.getItem(\"user\")\n\nconst clickdatas = ref([])\nconst uniqueUrl = ref(\"\")\nconst isLoading = ref(false)\n\nsetInterval(() => {\n  timestamp.value = new Date().toLocaleTimeString()\n}, 10)\n\nconst form = reactive({\n  createdBy: \"\",\n  createdAt: \"\",\n  timestamp,\n  unique_identifier: \"\",\n  description: \"\",\n  name: \"\",\n  id: \"\"\n})\n\n\nconst { data: account } = await useFetch(\n  `${config.API_BASE_URL}accounts/identifier/${id}`,\n  { key: id }\n)\n\nif (account.value) {\n  form.id = account.value.id\n  form.name = account.value.name\n  form.createdBy = account.value.createdBy;\n  form.unique_identifier = account.value.unique_identifier\n  form.description = account.value.description\n  form.createdAt = account.value.createdAt\n}\n\nconst formatDate = (dateString, formatString) => {\n  const date = new Date(dateString)\n  return moment(date).format(formatString)\n}\n\nconst updateAccount = async () => {\n  const u_data = {\n    id: form.id,\n    name: form.name,\n    unique_identifier: form.unique_identifier,\n    description: form.description,\n    createdBy: form.createdBy,\n    timestamp: new Date(),\n  }\n\n  const { data, error } = await useFetch(\n    `${config.API_BASE_URL}accounts/update/${id}`,\n    {\n      method: \"PUT\",\n      body: u_data,\n    }\n  )\n  if (data.value) {\n    console.log(\"data value\", data.value.message)\n    await AWN.success(data.value.message)\n    navigateTo(\"/accounts\")\n  }\n  if (error.value) {\n    await AWN.alert(error.value.statusMessage)\n  }\n}\n\nconst checkUrl = async (link) => {\n  isLoading.value = true\n  if (isValidUrl(link)) {\n    AWN.asyncBlock(\n      useFetch(`${config.API_BASE_URL}category-items/all/?url=${link}`),\n      (resp) => {\n        isLoading.value = false\n        if (resp.data && resp.data.value.length) {\n          uniqueUrl.value = \"invalid\"\n        } else {\n          uniqueUrl.value = \"valid\"\n        }\n      }\n    )\n  }\n}\n\nconst setLoading = () => {\n  isLoading.value = true\n}\n\nconst copy = async (id) => {\n  // Get the text field\n  var copyText = document.getElementById(id)\n\n  // Select the text field\n  copyText.select()\n  copyText.setSelectionRange(0, 99999) // For mobile devices\n\n  // Copy the text inside the text field\n  navigator.clipboard.writeText(copyText.value)\n  await AWN.success(copyText.value + \" copied to clipboard!\")\n  // Alert the copied text\n  //alert(\"Copied the text: \" + copyText.value);\n}\n\n</script>\n\n<script>\nexport default {\n  data() {\n    return {\n      tab: 1,\n    }\n  },\n  methods: {\n    activeTabOne() {\n      this.tab = 1\n    },\n    activeTabTwo() {\n      this.tab = 2\n    },\n    activeTabThree() {\n      this.tab = 3\n    },\n    activeTabFour() {\n      this.tab = 4\n    },\n  },\n}\n</script>\n\n<style>\ninput:checked {\n  background-color: #22c55e; /* bg-green-500 */\n}\n\ninput:checked ~ span:last-child {\n  --tw-translate-x: 1.75rem; /* translate-x-7 */\n}\n.valid {\n  border: 3px solid green;\n}\n\n.invalid {\n  border: 3px solid red;\n}\n\n#awn-popup-wrapper {\n  display: none !important;\n}\n\n.input-w-loading {\n  width: 90%;\n}\nimg.loading {\n  width: 50px;\n  display: inline-block;\n  margin-left: 10px;\n}\n\n#tasks_list h1,\ntable tbody tr td {\n  color: #000;\n}\n</style>\n\n<style>\n.modal-vue3-header,\n.modal-vue3-body .text {\n  color: #000 !important;\n}\n\n.confirm-modal > div > .modal-vue3-content {\n  /* background: red; */\n  /* display: none !important; */\n}\n</style>\n"],"names":["_withAsyncContext"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AA4QA,MAAA,cAAA;AAAA,EACA,OAAA;AACA,WAAA;AAAA,MACA,KAAA;AAAA,IACA;AAAA,EACA;AAAA,EACA,SAAA;AAAA,IACA,eAAA;AACA,WAAA,MAAA;AAAA,IACA;AAAA,IACA,eAAA;AACA,WAAA,MAAA;AAAA,IACA;AAAA,IACA,iBAAA;AACA,WAAA,MAAA;AAAA,IACA;AAAA,IACA,gBAAA;AACA,WAAA,MAAA;AAAA,IACA;AAAA,EACA;AACA;;;;;;AAnIA,WAAA,MAAA;AACA,UAAA,SAAA,iBAAA;AACA,UAAA,EAAA,GAAA,KAAqB,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAA,SAAA,EAAA,MAAA;AAErB,QAAA,YAAA,IAAA,IAAA,KAAA,EAAA,mBAAA,CAAA;AACA,iBAAA,QAAA,MAAA;AAEA,QAAA,EAAA;AACA,QAAA,EAAA;AACA,QAAA,KAAA;AAEA,gBAAA,MAAA;AACA,gBAAA,QAAA,IAAA,KAAA,EAAA,mBAAA;AAAA,IACA,GAAA,EAAA;AAEA,UAAA,OAAA,SAAA;AAAA,MACA,WAAA;AAAA,MACA,WAAA;AAAA,MACA;AAAA,MACA,mBAAA;AAAA,MACA,aAAA;AAAA,MACA,MAAA;AAAA,MACA,IAAA;AAAA,IACA,CAAA;AAGA,UAAA,EAAA,MAAA,QAAA,KAAgC,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAA;AAAA,MAChC,GAAA,OAAA,mCAAA;AAAA,MACA,EAAA,KAAA,GAAA;AAAA,MACA;AAAA,IAAA,CAAA;AAEA,QAAA,QAAA,OAAA;AACA,WAAA,KAAA,QAAA,MAAA;AACA,WAAA,OAAA,QAAA,MAAA;AACA,WAAA,YAAA,QAAA,MAAA;AACA,WAAA,oBAAA,QAAA,MAAA;AACA,WAAA,cAAA,QAAA,MAAA;AACA,WAAA,YAAA,QAAA,MAAA;AAAA,IACA;AAEA,UAAA,aAAA,CAAA,YAAA,iBAAA;AACA,YAAA,OAAA,IAAA,KAAA,UAAA;AACA,aAAA,OAAA,IAAA,EAAA,OAAA,YAAA;AAAA,IACA;;;;;;;;;;;;"}
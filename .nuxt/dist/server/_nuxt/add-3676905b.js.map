{"version":3,"file":"add-3676905b.js","sources":["../../../../pages/users/add.vue"],"sourcesContent":["<template>\n  <div>\n    <div id=\"last-users\">\n      <h1 class=\"font-bold py-4 uppercase text-center\">Add New User</h1>\n      <form @submit.prevent=\"createUser\">\n        <div class=\"overflow-hidden shadow sm:rounded-md\">\n          <div class=\"px-4 py-5 sm:p-6 w-full md:w-2/4 m-auto sm:w-full\">\n            <div class=\"grid grid-cols-6 gap-6\">\n              <div class=\"col-span-10 sm:col-span-12\">\n                <label\n                  for=\"userName\"\n                  class=\"block text-sm font-medium text-gray-700\"\n                  >First name</label\n                >\n                <input\n                  type=\"text\"\n                  v-model=\"form.userName\"\n                  id=\"userName\"\n                  class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\n                  required\n                />\n              </div>\n\n              <div class=\"col-span-10 sm:col-span-12\">\n                <label\n                  for=\"email\"\n                  class=\"block text-sm font-medium text-gray-700\"\n                  >Email address</label\n                >\n                <input\n                  type=\"text\"\n                  v-model=\"form.email\"\n                  id=\"email\"\n                  class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\n                  required\n                />\n              </div>\n              <div class=\"col-span-10 sm:col-span-12\">\n                <label\n                  for=\"password\"\n                  class=\"block text-sm font-medium text-gray-700\"\n                  >Password</label\n                >\n                <input\n                  type=\"password\"\n                  v-model=\"form.password\"\n                  id=\"password\"\n                  class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\n                  placeholder=\"Password\"\n                  required\n                />\n              </div>\n\n              <div class=\"col-span-10 sm:col-span-12\">\n                <label\n                  for=\"userType\"\n                  class=\"block text-sm font-medium text-gray-700\"\n                  >User Type</label\n                >\n                <select\n                  id=\"userType\"\n                  v-model=\"form.userType\"\n                  autocomplete=\"userType\"\n                  class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-800 focus:outline-none focus:ring-indigo-500 sm:text-sm\"\n                  required\n                >\n                  <option value=\"\">Select</option>\n                  <option value=\"Administrator\">Administrator</option>\n                  <option value=\"User\">User</option>\n                </select>\n              </div>\n\n              <div class=\"col-span-10 sm:col-span-12\">\n                <label\n                  for=\"userType\"\n                  class=\"block text-sm font-medium text-gray-700\"\n                  >Account</label\n                >\n                <select\n                  id=\"Account\"\n                  v-model=\"form.AccountId\"\n                  autocomplete=\"Account\"\n                  class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 block w-full rounded-md border border-gray-300 py-2 px-3 shadow-sm focus:border-gray-800 focus:outline-none focus:ring-indigo-500 sm:text-sm\"\n                  required\n                >\n                <option value=null>Select</option>\n                <option v-for=\"account in accounts\" :key=\"account.id\" :value=\"account.id\">{{account.name}}</option>\n                </select>\n              </div>\n            </div>\n          </div>\n          <div\n            class=\"px-4 py-3 text-right sm:px-6 w-full md:w-2/4 m-auto sm:w-full\"\n          >\n            <button\n              type=\"submit\"\n              class=\"bg-[#bcbcbc] inline-flex justify-center rounded-md border border-transparent py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\"\n            >\n              Save\n            </button>\n          </div>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script setup>\ndefinePageMeta({\n  middleware: [\"auth\", \"admin\"],\n});\nconst AWN = inject(\"$awn\");\nconst config = useRuntimeConfig();\nconst form = reactive({\n  userName: \"\",\n  email: \"\",\n  password: \"\",\n  userType: \"\",\n  AccountId: null,\n});\n\nconst accounts = ref([])\nconst createUser = async () => {\n  let a_data = {\n    userName: form.userName,\n    email: form.email,\n    password: form.password,\n    userType: form.userType,\n    AccountId: form.AccountId,\n  };\n\n  // const { data, error } =\n  await useFetch(`${config.API_BASE_URL}users/create`, {\n    method: \"POST\",\n    body: a_data,\n  })\n    .then((result) => {\n      if (result.data.value) {\n        AWN.success(result.data.value.message);\n        navigateTo(\"/users\");\n      }\n      if (result.error.value) {\n        console.log(\"error\", result.error.value.data.message);\n        AWN.alert(error);\n      }\n    })\n    .catch((error) => {\n      console.log(\"error\", error);\n      AWN.alert(\"Validation error\");\n    });\n  // if (data.value) {\n\n  // }\n  // if (error.value) {\n\n  // }\n\n  // location.assign('/users')\n};\nconst setAccounts = async () => {\n  const { data: data } = await useFetch(`${config.API_BASE_URL}accounts/all`)\n  accounts.value = data.value\n}\nonBeforeMount(setAccounts)\n</script>\n\n<style scoped></style>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AA+GA,WAAA,MAAA;AACA,qBAAA;AACA,UAAA,OAAA,SAAA;AAAA,MACA,UAAA;AAAA,MACA,OAAA;AAAA,MACA,UAAA;AAAA,MACA,UAAA;AAAA,MACA,WAAA;AAAA,IACA,CAAA;AAEA,UAAA,WAAA,IAAA,EAAA;;;;;;;;;;;;;;;;"}
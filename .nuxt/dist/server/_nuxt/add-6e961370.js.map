{"version":3,"file":"add-6e961370.js","sources":["../../../../pages/tracking-url/add.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div id=\"last-tracking-url\">\r\n      <h1 class=\"font-bold py-4 uppercase\">Add New Tracking URL</h1>\r\n      <form @submit.prevent=\"createTrackingURL\">\r\n        <div class=\"overflow-hidden shadow sm:rounded-md\">\r\n          <div class=\"px-4 py-5 sm:p-6\">\r\n            <div class=\"flex flex-row py-2\">\r\n              <div\r\n                class=\"basis-1/5 flex items-center text-sm font-medium text-gray-700\"\r\n              >\r\n                Tracking URL\r\n              </div>\r\n              <div class=\"basis-1/3 px-1.5\">\r\n                <input\r\n                  type=\"text\"\r\n                  v-model=\"form.tracking_url\"\r\n                  :disabled=\"form.tracking_url\"\r\n                  id=\"tracking_url\"\r\n                  class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div\r\n                class=\"basis-1/2 flex items-center text-sm font-medium text-gray-700 pl-3\"\r\n              >\r\n                <button\r\n                  type=\"button\"\r\n                  @click=\"(event) => copy('tracking_url')\"\r\n                  title=\"Copy Command To Clipboard\"\r\n                >\r\n                  <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    fill=\"none\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    stroke-width=\"1.5\"\r\n                    stroke=\"currentColor\"\r\n                    class=\"w-6 h-6\"\r\n                  >\r\n                    <path\r\n                      stroke-linecap=\"round\"\r\n                      stroke-linejoin=\"round\"\r\n                      d=\"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5A3.375 3.375 0 006.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0015 2.25h-1.5a2.251 2.251 0 00-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 00-9-9z\"\r\n                    />\r\n                  </svg>\r\n                </button>\r\n\r\n                <a\r\n                  :href=\"`${form.tracking_url}`\"\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  title=\"Open To New Tap\"\r\n                  class=\"pl-2\"\r\n                >\r\n                  <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    fill=\"none\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    stroke-width=\"1.5\"\r\n                    stroke=\"currentColor\"\r\n                    class=\"w-6 h-6\"\r\n                  >\r\n                    <path\r\n                      stroke-linecap=\"round\"\r\n                      stroke-linejoin=\"round\"\r\n                      d=\"M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25\"\r\n                    />\r\n                  </svg>\r\n                </a>\r\n                <!-- <p class=\"pl-2\">\r\n                  Either a newly generated one or a existing to edit\r\n                </p> -->\r\n              </div>\r\n            </div>\r\n            \r\n            <div class=\"flex flex-row py-2\">\r\n              <div\r\n                class=\"basis-1/5 flex items-center text-sm font-medium text-gray-700\"\r\n              >\r\n                Link to facebook\r\n              </div>\r\n              <div class=\"basis-1/12 px-1.5\">\r\n                <label\r\n                  class=\"flex items-center relative w-max cursor-pointer select-none\"\r\n                >\r\n                  <input\r\n                    @input=\"handleFbLink\"\r\n                    v-model=\"form.facebook_link\"\r\n                    :disabled=\"!form.facebook_link\"\r\n                    id=\"facebook_link\"\r\n                    type=\"checkbox\"\r\n                    true-value=\"yes\"\r\n                    false-value=\"no\"\r\n                    class=\"appearance-none transition-colors cursor-pointer w-14 h-7 rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-black focus:ring-blue-500 bg-red-500\"\r\n                  />\r\n                  <span\r\n                    class=\"absolute font-medium text-xs uppercase right-1 text-white\"\r\n                  >\r\n                    OFF\r\n                  </span>\r\n                  <span\r\n                    class=\"absolute font-medium text-xs uppercase right-8 text-white\"\r\n                  >\r\n                    Yes\r\n                  </span>\r\n                  <span\r\n                    class=\"w-7 h-7 right-7 absolute rounded-full transform transition-transform bg-gray-200\"\r\n                  />\r\n                </label>\r\n              </div>\r\n              <div class=\"basis-1/3 px-1.5\">\r\n                <a class=\"rounded-md bg-slate-500 text-white hover:bg-slate-700 transition-colors px-4 py-2 inline-block\" href=\"https://developers.facebook.com/tools/debug\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n                  Debugger\r\n                </a>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"flex flex-row py-2\">\r\n              <div\r\n                class=\"basis-1/5 flex items-center text-sm font-medium text-gray-700\"\r\n              >\r\n                Destination URL\r\n              </div>\r\n              <div class=\"basis-1/2\">\r\n                <input\r\n                  type=\"text\"\r\n                  v-model=\"form.destination_url\"\r\n                  id=\"destination_url\"\r\n                  class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\r\n                  required\r\n                />\r\n              </div>\r\n              <div\r\n                class=\"basis-1/5 flex items-center text-sm font-medium text-gray-700 pl-3\"\r\n              >\r\n                <button\r\n                  type=\"button\"\r\n                  @click=\"(event) => copy('destination_url')\"\r\n                  title=\"Copy Command To Clipboard\"\r\n                >\r\n                  <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    fill=\"none\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    stroke-width=\"1.5\"\r\n                    stroke=\"currentColor\"\r\n                    class=\"w-6 h-6\"\r\n                  >\r\n                    <path\r\n                      stroke-linecap=\"round\"\r\n                      stroke-linejoin=\"round\"\r\n                      d=\"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5A3.375 3.375 0 006.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0015 2.25h-1.5a2.251 2.251 0 00-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 00-9-9z\"\r\n                    />\r\n                  </svg>\r\n                </button>\r\n\r\n                <a\r\n                  :href=\"\r\n                    form.destination_url?.includes('http')\r\n                      ? form.destination_url\r\n                      : 'http://' + form.destination_url\r\n                  \"\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  title=\"Open To New Tap\"\r\n                  class=\"pl-2\"\r\n                >\r\n                  <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    fill=\"none\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    stroke-width=\"1.5\"\r\n                    stroke=\"currentColor\"\r\n                    class=\"w-6 h-6\"\r\n                  >\r\n                    <path\r\n                      stroke-linecap=\"round\"\r\n                      stroke-linejoin=\"round\"\r\n                      d=\"M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25\"\r\n                    />\r\n                  </svg>\r\n                </a>\r\n                <p class=\"pl-2\">Obligatory, by user</p>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"flex flex-row py-2\">\r\n              <div\r\n                class=\"basis-1/5 flex items-center text-sm font-medium text-gray-700\"\r\n              >\r\n                Task ID\r\n              </div>\r\n              <div class=\"basis-1/4\">\r\n                <input\r\n                  type=\"text\"\r\n                  v-model=\"form.task_id\"\r\n                  id=\"task_id\"\r\n                  class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\r\n                  required\r\n                  disabled\r\n                />\r\n              </div>\r\n              <div\r\n                class=\"basis-1/2 flex items-center text-sm font-medium text-gray-700 pl-3\"\r\n              >\r\n                <svg\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  fill=\"none\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  stroke-width=\"1.5\"\r\n                  stroke=\"currentColor\"\r\n                  class=\"w-6 h-6\"\r\n                >\r\n                  <path\r\n                    stroke-linecap=\"round\"\r\n                    stroke-linejoin=\"round\"\r\n                    d=\"M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0112 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 013 12c0-1.605.42-3.113 1.157-4.418\"\r\n                  />\r\n                </svg>\r\n\r\n                <p class=\"pl-7\">Obligatory, by user</p>\r\n              </div>\r\n            </div>\r\n\r\n            <p class=\"text-sm font-medium text-gray-700 pt-2\">\r\n              Tracking URL markup:\r\n            </p>\r\n\r\n            <div\r\n              class=\"col-span-12 sm:col-span-12 rounded-lg border-solid border-2 border-[#cbd5e1] shadow-sm p-4 mt-2\"\r\n            >\r\n              <div\r\n                class=\"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-1 xl:grid-cols-12 gap-4 gap-x-4\"\r\n              >\r\n                <div class=\"col-span-12\">\r\n                  <div class=\"grid grid-cols-12\">\r\n                    <div\r\n                      class=\"col-span-3 flex items-center text-sm font-medium text-gray-700\"\r\n                    >\r\n                      Tracking url title\r\n                    </div>\r\n                    <div class=\"col-span-9 px-1.5\">\r\n                      <input\r\n                        type=\"text\"\r\n                        v-model=\"form.seo_title\"\r\n                        id=\"seo_title\"\r\n                        class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-span-12\">\r\n                  <div class=\"grid grid-cols-12\">\r\n                    <div\r\n                      class=\"col-span-3 flex items-center text-sm font-medium text-gray-700\"\r\n                    >\r\n                      Tracking url description\r\n                    </div>\r\n                    <div class=\"col-span-9 px-1.5\">\r\n                      <textarea\r\n                        v-model=\"form.seo_description\"\r\n                        id=\"seo_description\"\r\n                        rows=\"6\"\r\n                        class=\"bg-[#dddddd] h-20 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\r\n                      ></textarea>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-span-12\">\r\n                  <div class=\"grid grid-cols-12\">\r\n                    <div\r\n                      class=\"col-span-3 w-fit flex items-center text-sm font-medium text-gray-700\"\r\n                    >\r\n                      Tracking url image link\r\n                    </div>\r\n                    <div class=\"col-span-7 px-1.5\">\r\n                      <input\r\n                        type=\"text\"\r\n                        v-model=\"form.seo_image_url\"\r\n                        id=\"seo_image_url\"\r\n                        class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\r\n                      />\r\n                    </div>\r\n                    <div\r\n                      class=\"basis-1/5 flex items-center text-sm font-medium text-gray-700 pl-3\"\r\n                    >\r\n                      <button\r\n                        type=\"button\"\r\n                        @click=\"(event) => copy('seo_image_url')\"\r\n                        title=\"Copy Command To Clipboard\"\r\n                      >\r\n                        <svg\r\n                          xmlns=\"http://www.w3.org/2000/svg\"\r\n                          fill=\"none\"\r\n                          viewBox=\"0 0 24 24\"\r\n                          stroke-width=\"1.5\"\r\n                          stroke=\"currentColor\"\r\n                          class=\"w-6 h-6\"\r\n                        >\r\n                          <path\r\n                            stroke-linecap=\"round\"\r\n                            stroke-linejoin=\"round\"\r\n                            d=\"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5A3.375 3.375 0 006.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0015 2.25h-1.5a2.251 2.251 0 00-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 00-9-9z\"\r\n                          />\r\n                        </svg>\r\n                      </button>\r\n\r\n                      <a\r\n                        :href=\"form.seo_image_url\"\r\n                        target=\"_blank\"\r\n                        rel=\"noopener noreferrer\"\r\n                        title=\"Open To New Tap\"\r\n                        class=\"pl-2\"\r\n                      >\r\n                        <svg\r\n                          xmlns=\"http://www.w3.org/2000/svg\"\r\n                          fill=\"none\"\r\n                          viewBox=\"0 0 24 24\"\r\n                          stroke-width=\"1.5\"\r\n                          stroke=\"currentColor\"\r\n                          class=\"w-6 h-6\"\r\n                        >\r\n                          <path\r\n                            stroke-linecap=\"round\"\r\n                            stroke-linejoin=\"round\"\r\n                            d=\"M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25\"\r\n                          />\r\n                        </svg>\r\n                      </a>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"px-4 py-3 text-right sm:px-6 w-full sm:w-full\">\r\n            <button\r\n              type=\"submit\"\r\n              class=\"bg-[#bcbcbc] inline-flex justify-center rounded-md border border-transparent py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\"\r\n            >\r\n              Create tracking URL\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\ndefinePageMeta({\r\n  middleware: [\"auth\"],\r\n});\r\nconst AWN = inject(\"$awn\");\r\nconst config = useRuntimeConfig();\r\nconst urlParams = new URLSearchParams(window.location.search);\r\n\r\nconst facebook_link = ref(\"\");\r\n\r\nconst path = window.location.href;\r\nconst fullpath = path.split(\"/\").slice(0, 3).join(\"/\");\r\n\r\nconst form = reactive({\r\n  tracking_url: \"\",\r\n  destination_url: \"\",\r\n  task_id: urlParams.get(\"task_id\"),\r\n  seo_title: \"\",\r\n  seo_description: \"\",\r\n  seo_image_url: \"\",\r\n  facebook_link: \"no\",\r\n});\r\n\r\nconst createTrackingURL = async () => {\r\n  const a_data = {\r\n    tracking_url: form.tracking_url,\r\n    destination_url: form.destination_url,\r\n    task_id: form.task_id,\r\n    seo_title: form.seo_title,\r\n    seo_description: form.seo_description,\r\n    seo_image_url: form.seo_image_url,\r\n  };\r\n  console.log(\"Payload: \", a_data);\r\n\r\n  await useFetch(`${config.API_BASE_URL}trackingurl/create`, {\r\n    method: \"POST\",\r\n    body: a_data,\r\n  })\r\n    .then((result) => {\r\n      if (result.data.value) {\r\n        AWN.success(result.data.value.message);\r\n        navigateTo(\"/tracking-url\");\r\n      }\r\n      if (result.error.value) {\r\n        console.log(\"error value1\", result.error.value.data.message);\r\n        AWN.alert(result.error.value);\r\n      }\r\n    })\r\n    .catch((error) => {\r\n      console.log(\"error value\", error);\r\n      AWN.alert(\"Validation error\");\r\n    });\r\n};\r\n\r\nconst handleFbLink = (e) => {\r\n  facebook_link.value = form.facebook_link === \"no\" ? \"yes\" : \"no\";\r\n\r\n  const lastIndex = form.tracking_url.lastIndexOf(\"/\");\r\n  const beforeIdentifier = form.tracking_url.substring(0, lastIndex);\r\n  const afterIdentifier = form.tracking_url.substring(lastIndex + 1);\r\n\r\n  if (facebook_link.value === \"yes\") {\r\n    if (!form.tracking_url.includes(\"/f/\")) {\r\n      form.tracking_url = beforeIdentifier + \"/f/\" + afterIdentifier;\r\n    }\r\n  } else {\r\n    if (form.tracking_url.includes(\"/f/\")) {\r\n      form.tracking_url = form.tracking_url.replace(\"/f/\", \"/\");\r\n    }\r\n  }\r\n};\r\n\r\nconst getTrackingURL = async () => {\r\n  const { data, error } = await useFetch(\r\n    `${config.API_BASE_URL}trackingurl/gettrackingurl`\r\n  );\r\n\r\n  if (data.value) {\r\n    form.tracking_url = fullpath + \"/\" + data.value.newTrackingURl;\r\n  }\r\n  if (error.value) {\r\n    await AWN.alert(error.value.statusMessage);\r\n  }\r\n};\r\n\r\nonBeforeMount(getTrackingURL);\r\n\r\nconst copy = async (id) => {\r\n  // Get the text field\r\n  var copyText = document.getElementById(id);\r\n\r\n  // Select the text field\r\n  copyText.select();\r\n  copyText.setSelectionRange(0, 99999); // For mobile devices\r\n\r\n  // Copy the text inside the text field\r\n  let copied_url = copyText.value;\r\n  console.log(\"Copy url: \", copied_url);\r\n  // if (form.facebook_link === \"yes\") {\r\n  //   copied_url += \"?fbprev=yes\";\r\n  // } else {\r\n  //   copied_url += \"?redirect=yes\";\r\n  // }\r\n  //  else if (form.facebook_link === \"no\") {\r\n  //   copied_url += \"?redirect=yes\";\r\n  // }\r\n\r\n  navigator.clipboard.writeText(copied_url);\r\n  await AWN.success(copied_url + \" copied to clipboard!\");\r\n};\r\n</script>\r\n\r\n<style scoped>\r\ninput:checked {\r\n  background-color: #22c55e; /* bg-green-500 */\r\n}\r\n\r\ninput:checked ~ span:last-child {\r\n  --tw-translate-x: 1.75rem; /* translate-x-7 */\r\n}\r\n</style>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAkWA,WAAA,MAAA;AACA,qBAAA;AACA,UAAA,YAAA,IAAA,gBAAA,OAAA,SAAA,MAAA;AAEA,QAAA,EAAA;AAEA,UAAA,OAAA,OAAA,SAAA;AACA,SAAA,MAAA,GAAA,EAAA,MAAA,GAAA,CAAA,EAAA,KAAA,GAAA;AAEA,UAAA,OAAA,SAAA;AAAA,MACA,cAAA;AAAA,MACA,iBAAA;AAAA,MACA,SAAA,UAAA,IAAA,SAAA;AAAA,MACA,WAAA;AAAA,MACA,iBAAA;AAAA,MACA,eAAA;AAAA,MACA,eAAA;AAAA,IACA,CAAA;;;;;;;;;;;;;;;;;"}
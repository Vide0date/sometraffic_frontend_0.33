{"version":3,"file":"add-9daf44bd.js","sources":["../../../../pages/tracking-url/add.vue"],"sourcesContent":["<template>\n  <div>\n    <div id=\"last-tracking-url\">\n      <h1 class=\"font-bold py-4 uppercase\">Add New Tracking URL</h1>\n      <form @submit.prevent=\"createTrackingURL\">\n        <div class=\"overflow-hidden shadow sm:rounded-md\">\n          <div class=\"px-4 py-5 sm:p-6\">\n            <div class=\"flex flex-row py-2\">\n              <div\n                class=\"basis-1/5 flex items-center text-sm font-medium text-gray-700\"\n              >\n                Tracking URL\n              </div>\n              <div class=\"basis-1/3 px-1.5\">\n                <input\n                  type=\"text\"\n                  v-model=\"form.tracking_url\"\n                  :disabled=\"form.tracking_url\"\n                  id=\"tracking_url\"\n                  class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\n                  required\n                />\n              </div>\n              <div\n                class=\"basis-1/2 flex items-center text-sm font-medium text-gray-700 pl-3\"\n              >\n                <button\n                  type=\"button\"\n                  @click=\"(event) => copy('tracking_url')\"\n                  title=\"Copy Command To Clipboard\"\n                >\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    fill=\"none\"\n                    viewBox=\"0 0 24 24\"\n                    stroke-width=\"1.5\"\n                    stroke=\"currentColor\"\n                    class=\"w-6 h-6\"\n                  >\n                    <path\n                      stroke-linecap=\"round\"\n                      stroke-linejoin=\"round\"\n                      d=\"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5A3.375 3.375 0 006.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0015 2.25h-1.5a2.251 2.251 0 00-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 00-9-9z\"\n                    />\n                  </svg>\n                </button>\n\n                <a\n                  :href=\"`${form.tracking_url}`\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  title=\"Open To New Tap\"\n                  class=\"pl-2\"\n                >\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    fill=\"none\"\n                    viewBox=\"0 0 24 24\"\n                    stroke-width=\"1.5\"\n                    stroke=\"currentColor\"\n                    class=\"w-6 h-6\"\n                  >\n                    <path\n                      stroke-linecap=\"round\"\n                      stroke-linejoin=\"round\"\n                      d=\"M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25\"\n                    />\n                  </svg>\n                </a>\n                <!-- <p class=\"pl-2\">\n                  Either a newly generated one or a existing to edit\n                </p> -->\n              </div>\n            </div>\n\n            <div class=\"flex flex-row py-2\">\n              <div\n                class=\"basis-1/5 flex items-center text-sm font-medium text-gray-700\"\n              >\n                Link to facebook\n              </div>\n              <div class=\"basis-1/12 px-1.5\">\n                <label\n                  class=\"flex items-center relative w-max cursor-pointer select-none\"\n                >\n                  <input\n                    @input=\"handleFbLink\"\n                    v-model=\"form.facebook_link\"\n                    :disabled=\"!form.facebook_link\"\n                    id=\"facebook_link\"\n                    type=\"checkbox\"\n                    true-value=\"yes\"\n                    false-value=\"no\"\n                    class=\"appearance-none transition-colors cursor-pointer w-14 h-7 rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-black focus:ring-blue-500 bg-red-500\"\n                  />\n                  <span\n                    class=\"absolute font-medium text-xs uppercase right-1 text-white\"\n                  >\n                    OFF\n                  </span>\n                  <span\n                    class=\"absolute font-medium text-xs uppercase right-8 text-white\"\n                  >\n                    Yes\n                  </span>\n                  <span\n                    class=\"w-7 h-7 right-7 absolute rounded-full transform transition-transform bg-gray-200\"\n                  />\n                </label>\n              </div>\n              <div class=\"basis-1/3 px-1.5\">\n                <a\n                  class=\"rounded-md bg-slate-500 text-white hover:bg-slate-700 transition-colors px-4 py-2 inline-block\"\n                  href=\"https://developers.facebook.com/tools/debug\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  Debugger\n                </a>\n              </div>\n            </div>\n\n            <div class=\"flex flex-row py-2\">\n              <div\n                class=\"basis-1/5 flex items-center text-sm font-medium text-gray-700\"\n              >\n                Destination URL\n              </div>\n              <div class=\"basis-1/2\">\n                <input\n                  type=\"text\"\n                  v-model=\"form.destination_url\"\n                  id=\"destination_url\"\n                  class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\n                  required\n                />\n              </div>\n              <div\n                class=\"basis-1/5 flex items-center text-sm font-medium text-gray-700 pl-3\"\n              >\n                <button\n                  type=\"button\"\n                  @click=\"(event) => copy('destination_url')\"\n                  title=\"Copy Command To Clipboard\"\n                >\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    fill=\"none\"\n                    viewBox=\"0 0 24 24\"\n                    stroke-width=\"1.5\"\n                    stroke=\"currentColor\"\n                    class=\"w-6 h-6\"\n                  >\n                    <path\n                      stroke-linecap=\"round\"\n                      stroke-linejoin=\"round\"\n                      d=\"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5A3.375 3.375 0 006.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0015 2.25h-1.5a2.251 2.251 0 00-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 00-9-9z\"\n                    />\n                  </svg>\n                </button>\n\n                <a\n                  :href=\"\n                    form.destination_url?.includes('http')\n                      ? form.destination_url\n                      : 'http://' + form.destination_url\n                  \"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  title=\"Open To New Tap\"\n                  class=\"pl-2\"\n                >\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    fill=\"none\"\n                    viewBox=\"0 0 24 24\"\n                    stroke-width=\"1.5\"\n                    stroke=\"currentColor\"\n                    class=\"w-6 h-6\"\n                  >\n                    <path\n                      stroke-linecap=\"round\"\n                      stroke-linejoin=\"round\"\n                      d=\"M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25\"\n                    />\n                  </svg>\n                </a>\n                <p class=\"pl-2\">Obligatory, by user</p>\n              </div>\n            </div>\n\n            <div class=\"flex flex-row py-2\">\n              <div\n                class=\"basis-1/5 flex items-center text-sm font-medium text-gray-700\"\n              >\n                Task ID\n              </div>\n              <div class=\"basis-1/4\">\n                <input\n                  type=\"text\"\n                  v-model=\"form.task_id\"\n                  id=\"task_id\"\n                  class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\n                  required\n                  disabled\n                />\n              </div>\n              <div\n                class=\"basis-1/2 flex items-center text-sm font-medium text-gray-700 pl-3\"\n              >\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                  stroke-width=\"1.5\"\n                  stroke=\"currentColor\"\n                  class=\"w-6 h-6\"\n                >\n                  <path\n                    stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\"\n                    d=\"M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0112 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 013 12c0-1.605.42-3.113 1.157-4.418\"\n                  />\n                </svg>\n\n                <p class=\"pl-7\">Obligatory, by user</p>\n              </div>\n            </div>\n\n            <p class=\"text-sm font-medium text-gray-700 pt-2\">\n              Tracking URL markup:\n            </p>\n\n            <div\n              class=\"col-span-12 sm:col-span-12 rounded-lg border-solid border-2 border-[#cbd5e1] shadow-sm p-4 mt-2\"\n            >\n              <div\n                class=\"grid grid-cols-1 sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-1 xl:grid-cols-12 gap-4 gap-x-4\"\n              >\n                <div class=\"col-span-12\">\n                  <div class=\"grid grid-cols-12\">\n                    <div\n                      class=\"col-span-3 flex items-center text-sm font-medium text-gray-700\"\n                    >\n                      Tracking url title\n                    </div>\n                    <div class=\"col-span-8 px-1.5\">\n                      <input\n                        type=\"text\"\n                        v-model=\"form.seo_title\"\n                        id=\"seo_title\"\n                        class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\n                      />\n                    </div>\n                    <p class=\"col-span-1 mt-2 text-gray-900 text-xl\">{{ form.seo_title.length }}</p>\n                  </div>\n                </div>\n                <div class=\"col-span-12\">\n                  <div class=\"grid grid-cols-12\">\n                    <div\n                      class=\"col-span-3 flex items-center text-sm font-medium text-gray-700\"\n                    >\n                      Tracking url description\n                    </div>\n                    <div class=\"col-span-8 px-1.5\">\n                      <textarea\n                        v-model=\"form.seo_description\"\n                        id=\"seo_description\"\n                        rows=\"6\"\n                        class=\"bg-[#dddddd] h-20 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\n                      ></textarea>\n                    </div>\n                    <p class=\"col-span-1 mt-2 text-gray-900 text-xl\">{{ form.seo_description.length }}</p>\n                  </div>\n                </div>\n                <div class=\"col-span-12\">\n                  <div class=\"grid grid-cols-12\">\n                    <div\n                      class=\"col-span-3 w-fit flex items-center text-sm font-medium text-gray-700\"\n                    >\n                      Tracking url image link\n                    </div>\n                    <div class=\"col-span-7 px-1.5\">\n                      <input\n                        type=\"text\"\n                        v-model=\"form.seo_image_url\"\n                        id=\"seo_image_url\"\n                        class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\n                      />\n                    </div>\n                    <div\n                      class=\"basis-1/5 flex items-center text-sm font-medium text-gray-700 pl-3\"\n                    >\n                      <button\n                        type=\"button\"\n                        @click=\"(event) => copy('seo_image_url')\"\n                        title=\"Copy Command To Clipboard\"\n                      >\n                        <svg\n                          xmlns=\"http://www.w3.org/2000/svg\"\n                          fill=\"none\"\n                          viewBox=\"0 0 24 24\"\n                          stroke-width=\"1.5\"\n                          stroke=\"currentColor\"\n                          class=\"w-6 h-6\"\n                        >\n                          <path\n                            stroke-linecap=\"round\"\n                            stroke-linejoin=\"round\"\n                            d=\"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5A3.375 3.375 0 006.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0015 2.25h-1.5a2.251 2.251 0 00-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 00-9-9z\"\n                          />\n                        </svg>\n                      </button>\n\n                      <a\n                        :href=\"form.seo_image_url\"\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        title=\"Open To New Tap\"\n                        class=\"pl-2\"\n                      >\n                        <svg\n                          xmlns=\"http://www.w3.org/2000/svg\"\n                          fill=\"none\"\n                          viewBox=\"0 0 24 24\"\n                          stroke-width=\"1.5\"\n                          stroke=\"currentColor\"\n                          class=\"w-6 h-6\"\n                        >\n                          <path\n                            stroke-linecap=\"round\"\n                            stroke-linejoin=\"round\"\n                            d=\"M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25\"\n                          />\n                        </svg>\n                      </a>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"px-4 py-3 text-right sm:px-6 w-full sm:w-full\">\n            <button\n              type=\"submit\"\n              class=\"bg-[#bcbcbc] inline-flex justify-center rounded-md border border-transparent py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2\"\n            >\n              Create tracking URL\n            </button>\n          </div>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script setup>\ndefinePageMeta({\n  middleware: [\"auth\"],\n});\nconst AWN = inject(\"$awn\");\nconst config = useRuntimeConfig();\nconst urlParams = new URLSearchParams(window.location.search);\n\nconst facebook_link = ref(\"\");\n\nconst path = window.location.href;\nconst fullpath = path.split(\"/\").slice(0, 3).join(\"/\");\n\nconst form = reactive({\n  tracking_url: \"\",\n  destination_url: \"\",\n  task_id: urlParams.get(\"task_id\"),\n  seo_title: \"\",\n  seo_description: \"\",\n  seo_image_url: \"\",\n  facebook_link: \"no\",\n});\n\nconst createTrackingURL = async () => {\n  const a_data = {\n    tracking_url: form.tracking_url,\n    destination_url: form.destination_url,\n    task_id: form.task_id,\n    seo_title: form.seo_title,\n    seo_description: form.seo_description,\n    seo_image_url: form.seo_image_url,\n  };\n  console.log(\"Payload: \", a_data);\n\n  await useFetch(`${config.API_BASE_URL}trackingurl/create`, {\n    method: \"POST\",\n    body: a_data,\n  })\n    .then((result) => {\n      if (result.data.value) {\n        AWN.success(result.data.value.message);\n        navigateTo(\"/tracking-url\");\n      }\n      if (result.error.value) {\n        console.log(\"error value1\", result.error.value.data.message);\n        AWN.alert(result.error.value);\n      }\n    })\n    .catch((error) => {\n      console.log(\"error value\", error);\n      AWN.alert(\"Validation error\");\n    });\n};\n\nconst handleFbLink = (e) => {\n  facebook_link.value = form.facebook_link === \"no\" ? \"yes\" : \"no\";\n\n  const lastIndex = form.tracking_url.lastIndexOf(\"/\");\n  const beforeIdentifier = form.tracking_url.substring(0, lastIndex);\n  const afterIdentifier = form.tracking_url.substring(lastIndex + 1);\n\n  if (facebook_link.value === \"yes\") {\n    if (!form.tracking_url.includes(\"/f/\")) {\n      form.tracking_url = beforeIdentifier + \"/f/\" + afterIdentifier;\n    }\n  } else {\n    if (form.tracking_url.includes(\"/f/\")) {\n      form.tracking_url = form.tracking_url.replace(\"/f/\", \"/\");\n    }\n  }\n};\n\nconst getTrackingURL = async () => {\n  const { data, error } = await useFetch(\n    `${config.API_BASE_URL}trackingurl/gettrackingurl`\n  );\n\n  if (data.value) {\n    form.tracking_url = fullpath + \"/\" + data.value.newTrackingURl;\n  }\n  if (error.value) {\n    await AWN.alert(error.value.statusMessage);\n  }\n};\n\nonBeforeMount(getTrackingURL);\n\nconst copy = async (id) => {\n  // Get the text field\n  var copyText = document.getElementById(id);\n\n  // Select the text field\n  copyText.select();\n  copyText.setSelectionRange(0, 99999); // For mobile devices\n\n  // Copy the text inside the text field\n  let copied_url = copyText.value;\n  console.log(\"Copy url: \", copied_url);\n  // if (form.facebook_link === \"yes\") {\n  //   copied_url += \"?fbprev=yes\";\n  // } else {\n  //   copied_url += \"?redirect=yes\";\n  // }\n  //  else if (form.facebook_link === \"no\") {\n  //   copied_url += \"?redirect=yes\";\n  // }\n\n  navigator.clipboard.writeText(copied_url);\n  await AWN.success(copied_url + \" copied to clipboard!\");\n};\n</script>\n\n<style scoped>\ninput:checked {\n  background-color: #22c55e; /* bg-green-500 */\n}\n\ninput:checked ~ span:last-child {\n  --tw-translate-x: 1.75rem; /* translate-x-7 */\n}\n</style>\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAyWA,WAAA,MAAA;AACA,qBAAA;AACA,UAAA,YAAA,IAAA,gBAAA,OAAA,SAAA,MAAA;AAEA,QAAA,EAAA;AAEA,UAAA,OAAA,OAAA,SAAA;AACA,SAAA,MAAA,GAAA,EAAA,MAAA,GAAA,CAAA,EAAA,KAAA,GAAA;AAEA,UAAA,OAAA,SAAA;AAAA,MACA,cAAA;AAAA,MACA,iBAAA;AAAA,MACA,SAAA,UAAA,IAAA,SAAA;AAAA,MACA,WAAA;AAAA,MACA,iBAAA;AAAA,MACA,eAAA;AAAA,MACA,eAAA;AAAA,IACA,CAAA;;;;;;;;;;;;;;;;;"}
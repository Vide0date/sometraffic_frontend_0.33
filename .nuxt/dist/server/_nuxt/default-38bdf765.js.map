{"version":3,"file":"default-38bdf765.js","sources":["../../../../components/TimeDisplay.vue","../../../../layouts/default.vue"],"sourcesContent":["<template>\r\n    <div>{{ time }}</div>\r\n  </template>\r\n  \r\n  <script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        time: new Date().toLocaleTimeString(),\r\n      };\r\n    },\r\n  \r\n    mounted() {\r\n      setInterval(() => {\r\n        this.time = new Date().toLocaleTimeString();\r\n      }, 1000);\r\n    },\r\n  };\r\n  </script>","<template>\r\n  <div\r\n    id=\"container\"\r\n    class=\"antialiased bg-[#848484] w-full min-h-screen text-slate-300 relative py-4\"\r\n  >\r\n    <Modal\r\n      title=\"You can login again later\"\r\n      modalClass=\"confirm-modal\"\r\n      v-model:visible=\"shouldShowDialog\"\r\n      :cancelButton=\"{ text: 'Cancel' }\"\r\n      :okButton=\"{ text: 'Okay', onclick: () => logout() }\"\r\n    >\r\n      <div class=\"text\">Are you sure?</div>\r\n    </Modal>\r\n\r\n    <div\r\n      class=\"bg-[#848484] grid grid-cols-12 mx-auto gap-2 sm:gap-4 md:gap-6 lg:gap-10 xl:gap-14 max-w-12xl my-10 px-2\"\r\n    >\r\n      <div\r\n        id=\"menu\"\r\n        class=\"border border-white border-solid bg-white/10 col-span-3 rounded-lg p-4\"\r\n      >\r\n        <h1\r\n          class=\"font-bold text-lg lg:text-3xl bg-gradient-to-br from-black via-black/50 to-transparent bg-clip-text text-transparent\"\r\n        >\r\n          <NuxtLink to=\"/dashboard\">Dashboard</NuxtLink\r\n          >\r\n        </h1>\r\n        <h2 class=\"text-white-600 text-md mb-2\"><TimeDisplay /></h2>\r\n        <!-- <h2 class=\"text-white-600 text-md mb-2\"><TimeDisplayZone timezone=\"America/New_York\"/></h2> -->\r\n\r\n        <!-- Profile dropdown -->\r\n\r\n        <div>\r\n          <NuxtLink\r\n            to=\"/dashboard\"\r\n            class=\"flex flex-col space-y-2 md:space-y-0 md:flex-row mb-5 items-center md:space-x-2 hover:bg-white/10 hover:text-black hover:border hover:border-white hover:border-solid group transition duration-150 ease-linear rounded-lg group w-full py-3 px-2\"\r\n          >\r\n            <div>\r\n              <img\r\n                class=\"rounded-full w-10 h-10 relative object-cover\"\r\n                src=\"https://img.freepik.com/free-photo/no-problem-concept-bearded-man-makes-okay-gesture-has-everything-control-all-fine-gesture-wears-spectacles-jumper-poses-against-pink-wall-says-i-got-this-guarantees-something_273609-42817.jpg?w=1800&t=st=1669749937~exp=1669750537~hmac=4c5ab249387d44d91df18065e1e33956daab805bee4638c7fdbf83c73d62f125\"\r\n                alt=\"\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <p class=\"font-medium group-hover:text-black leading-4\">\r\n                {{ user.userName }}\r\n              </p>\r\n              <span class=\"flex justify-between py-1\">\r\n                <span class=\"text-xs text-slate-600\">{{ user.userType }}</span>\r\n                <!-- <span class=\"text-xs text-slate-600 pl-3\">{{ user.currentTime }}</span> -->\r\n              </span>\r\n            </div>\r\n          </NuxtLink>\r\n          <div id=\"project-selector\" class=\"relative mb-8\">\r\n            <div class=\"flex mb-4 text-white\">\r\n              <p class=\"font-bold text-xl\">Projects:</p>\r\n            </div>\r\n            <div @click=\"showProjectsList = !showProjectsList\" class=\"rounded-md cursor-pointer relative flex bg-white p-3 w-3/5 text-black\">\r\n              <button>{{projects.length ? projects.find(project => project.id === activeProject).name : ''}}</button>\r\n              <span :class=\"{'rotate-180':showProjectsList}\" class=\"absolute right-3 top-1/2 -translate-y-1\"><svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" id=\"Capa_1\" x=\"0px\" y=\"0px\" width=\"24px\" height=\"14px\" viewBox=\"0 0 960 560\" enable-background=\"new 0 0 960 560\" xml:space=\"preserve\">\r\n<g id=\"Rounded_Rectangle_33_copy_4_1_\">\r\n\t<path d=\"M480,344.181L268.869,131.889c-15.756-15.859-41.3-15.859-57.054,0c-15.754,15.857-15.754,41.57,0,57.431l237.632,238.937   c8.395,8.451,19.562,12.254,30.553,11.698c10.993,0.556,22.159-3.247,30.555-11.698l237.631-238.937   c15.756-15.86,15.756-41.571,0-57.431s-41.299-15.859-57.051,0L480,344.181z\"/>\r\n</g>\r\n</svg></span>\r\n            </div>\r\n            <div v-show=\"showProjectsList\" class=\"absolute -right-2 top-0  flex flex-col gap-y-4 bg-white rounded-md p-4 text-black\">\r\n              <div class=\"flex flex-col gap-y-2\" v-for=\"(project, index) in projects\" :key=\"project.id\">\r\n                <button @click=\"setActiveProject(project.id)\">{{project.name}}</button>\r\n                <hr :class=\"{'border-black': index + 1 === projects.length}\">\r\n              </div>\r\n              <button class=\"text-center cursor-pointer\" @click=\"navigateTo('/projects/add'); showProjectsList = false;\">+ Add a project</button>\r\n              <hr>\r\n              <button class=\"text-center cursor-pointer\" @click=\"navigateTo('/projects'); showProjectsList = false;\">View projects</button>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- <a\r\n            :href=\"config.API_BASE_URL.replace('api/', '') + 'sometraffic.sql'\"\r\n            download=\"full_db_name.sql\"\r\n            target=\"_blank\"\r\n            >Download Database</a\r\n          > -->\r\n          <div v-if=\"user.userType === 'Administrator' || user.userType === 'administrator'\" class=\"flex w-full\">\r\n\r\n            <NuxtLink\r\n            class=\"hover:bg-white/10 hover:text-black hover:border hover:border-white hover:border-solid transition w-full duration-150 ease-linear rounded-lg py-3 px-2 group\"\r\n            to=\"/admin-settings\"\r\n            >\r\n            <div\r\n            class=\"flex flex-col space-y-2 md:flex-row md:space-y-0 space-x-2 items-center\"\r\n            >\r\n            <div>\r\n                <p\r\n                class=\"font-bold text-base lg:text-lg text-slate-200 leading-4 group-hover:text-black\"\r\n                >\r\n                Admin settings\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </NuxtLink>\r\n      </div>\r\n\r\n          <!--\r\n                        Dropdown menu, show/hide based on menu state.\r\n\r\n                        Entering: \"transition ease-out duration-100\"\r\n                        From: \"transform opacity-0 scale-95\"\r\n                        To: \"transform opacity-100 scale-100\"\r\n                        Leaving: \"transition ease-in duration-75\"\r\n                        From: \"transform opacity-100 scale-100\"\r\n                        To: \"transform opacity-0 scale-95\"\r\n                    -->\r\n          <!-- <div class=\"flex flex-col space-y-2 my-5 absolute left-inherit top-25 z-10 mt-2 w-48 origin-top-left rounded-md bg-inherit py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none\"\r\n                        role=\"menu\" aria-orientation=\"vertical\" aria-labelledby=\"user-menu-button\" tabindex=\"-1\">\r\n                        <a href=\"#\" class=\"hover:bg-white/10 transition duration-150 ease-linear rounded-lg py-3 px-3 group\"\r\n                            role=\"menuitem\" tabindex=\"-1\" id=\"user-menu-item-2\">\r\n                            <div class=\"flex flex-col space-y-2 md:flex-row md:space-y-0 space-x-2 items-center px-3\">\r\n                                <div>\r\n                                    <p\r\n                                        class=\"font-bold text-base lg:text-lg text-slate-200 leading-4 group-hover:text-black\">\r\n                                        Your Profile</p>\r\n                                </div>\r\n                            </div>\r\n                        </a>\r\n                        <a href=\"#\" class=\"hover:bg-white/10 transition duration-150 ease-linear rounded-lg py-3 px-2 group\"\r\n                            role=\"menuitem\" tabindex=\"-1\" id=\"user-menu-item-2\">\r\n                            <div class=\"flex flex-col space-y-2 md:flex-row md:space-y-0 space-x-2 items-center px-3\">\r\n                                <div>\r\n                                    <p\r\n                                        class=\"font-bold text-base lg:text-lg text-slate-200 leading-4 group-hover:text-black\">\r\n                                        Sign out</p>\r\n                                </div>\r\n                            </div>\r\n                        </a>\r\n                    </div> -->\r\n        </div>\r\n\r\n        <hr class=\"my-2 border-slate-700\" />\r\n        <div id=\"menu\" class=\"flex flex-col space-y-2 my-5\">\r\n          <NuxtLink\r\n            class=\"hover:bg-white/10 hover:text-black hover:border hover:border-white hover:border-solid transition duration-150 ease-linear rounded-lg py-3 px-2 group\"\r\n            to=\"/category-items\"\r\n          >\r\n            <div\r\n              class=\"flex flex-col space-y-2 md:flex-row md:space-y-0 space-x-2 items-center\"\r\n            >\r\n              <div>\r\n                <p\r\n                  class=\"font-bold text-base lg:text-lg text-slate-200 leading-4 group-hover:text-black\"\r\n                >\r\n                  Category Items\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </NuxtLink>\r\n          <NuxtLink\r\n            class=\"hover:bg-white/10 hover:text-black hover:border hover:border-white hover:border-solid transition duration-150 ease-linear rounded-lg py-3 px-2 group\"\r\n            to=\"/information-items\"\r\n          >\r\n            <div\r\n              class=\"flex flex-col space-y-2 md:flex-row md:space-y-0 space-x-2 items-center\"\r\n            >\r\n              <div>\r\n                <p\r\n                  class=\"font-bold text-base lg:text-lg text-slate-200 leading-4 group-hover:text-black\"\r\n                >\r\n                  Information Items\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </NuxtLink>\r\n          <NuxtLink\r\n            class=\"hover:bg-white/10 hover:text-black hover:border hover:border-white hover:border-solid transition duration-150 ease-linear rounded-lg py-3 px-2 group\"\r\n            to=\"/tasks\"\r\n          >\r\n            <div\r\n              class=\"flex flex-col space-y-2 md:flex-row md:space-y-0 space-x-2 items-center\"\r\n            >\r\n              <div>\r\n                <p\r\n                  class=\"font-bold text-base lg:text-lg text-slate-200 leading-4 group-hover:text-black\"\r\n                >\r\n                  Tasks\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </NuxtLink>\r\n          <NuxtLink\r\n          v-if=\"user.userType === 'Administrator'\"\r\n            class=\"hover:bg-white/10 hover:text-black hover:border hover:border-white hover:border-solid transition duration-150 ease-linear rounded-lg py-3 px-2 group\"\r\n            to=\"/users\"\r\n          >\r\n            <div\r\n              class=\"flex flex-col space-y-2 md:flex-row md:space-y-0 space-x-2 items-center\"\r\n            >\r\n              <div>\r\n                <p\r\n                  class=\"font-bold text-base lg:text-lg text-slate-200 leading-4 group-hover:text-black\"\r\n                >\r\n                  Users\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </NuxtLink>\r\n          <!-- <NuxtLink\r\n            class=\"hover:bg-white/10 hover:text-black hover:border hover:border-white hover:border-solid transition duration-150 ease-linear rounded-lg py-3 px-2 group\"\r\n            to=\"/emails\"\r\n          >\r\n            <div\r\n              class=\"flex flex-col space-y-2 md:flex-row md:space-y-0 space-x-2 items-center\"\r\n            >\r\n              <div>\r\n                <p\r\n                  class=\"font-bold text-base lg:text-lg text-slate-200 leading-4 group-hover:text-black\"\r\n                >\r\n                  Emails\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </NuxtLink> -->\r\n          <NuxtLink\r\n            class=\"hover:bg-white/10 hover:text-black hover:border hover:border-white hover:border-solid transition duration-150 ease-linear rounded-lg py-3 px-2 group\"\r\n            to=\"/tracking-url\"\r\n          >\r\n            <div\r\n              class=\"flex flex-col space-y-2 md:flex-row md:space-y-0 space-x-2 items-center\"\r\n            >\r\n              <div>\r\n                <p\r\n                  class=\"font-bold text-base lg:text-lg text-slate-200 leading-4 group-hover:text-black\"\r\n                >\r\n                  Tracking URL\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </NuxtLink>\r\n          <NuxtLink\r\n            class=\"hover:bg-white/10 hover:text-black hover:border hover:border-white hover:border-solid transition duration-150 ease-linear rounded-lg py-3 px-2 group\"\r\n            to=\"/click-list\"\r\n          >\r\n            <div\r\n              class=\"flex flex-col space-y-2 md:flex-row md:space-y-0 space-x-2 items-center\"\r\n            >\r\n              <div>\r\n                <p\r\n                  class=\"font-bold text-base lg:text-lg text-slate-200 leading-4 group-hover:text-black\"\r\n                >\r\n                  Click List\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </NuxtLink>\r\n          <NuxtLink\r\n            class=\"hover:bg-white/10 hover:text-black hover:border hover:border-white hover:border-solid transition duration-150 ease-linear rounded-lg py-3 px-2 group\"\r\n            to=\"/user-groups\"\r\n          >\r\n            <div\r\n              class=\"flex flex-col space-y-2 md:flex-row md:space-y-0 space-x-2 items-center\"\r\n            >\r\n              <div>\r\n                <p\r\n                  class=\"font-bold text-base lg:text-lg text-slate-200 leading-4 group-hover:text-black\"\r\n                >\r\n                  Groups\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </NuxtLink>\r\n          <a\r\n            href=\"#\"\r\n            @click=\"handleLogout\"\r\n            class=\"hover:bg-white/10 hover:border hover:border-white hover:border-solid transition duration-150 ease-linear rounded-lg py-3 px-2 group\"\r\n            role=\"menuitem\"\r\n            tabindex=\"-1\"\r\n            id=\"user-menu-item-2\"\r\n          >\r\n            <div\r\n              class=\"flex flex-col space-y-2 md:flex-row md:space-y-0 space-x-2 items-center\"\r\n            >\r\n              <div>\r\n                <p\r\n                  class=\"font-bold text-base lg:text-lg text-slate-200 leading-4 group-hover:text-black\"\r\n                >\r\n                  Logout\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </a>\r\n        </div>\r\n        <p class=\"text-sm text-center text-black-600\">\r\n          v0.4.0 | &copy; 2023 Sometraffic\r\n        </p>\r\n      </div>\r\n      <div\r\n        id=\"content\"\r\n        class=\"border border-white border-solid bg-white/10 col-span-9 rounded-lg p-6\"\r\n        >\r\n        <slot />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { Modal } from \"usemodal-vue3\";\r\nimport moment from \"moment-timezone\";\r\n\r\nconst AWN = inject(\"$awn\");\r\nconst config = useRuntimeConfig();\r\n\r\nconst shouldShowDialog = ref(false);\r\nconst showProjectsList = ref(false);\r\nconst user = reactive({\r\n  userName: \"\",\r\n  userType: \"\",\r\n  currentTime: \"\",\r\n});\r\nconst db_name = moment(new Date()).format(\"YYYY-MM-DD-HH_mm\");\r\nconst full_db_name = `sometraffic-${db_name}`;\r\nconst projects = ref([])\r\nconst activeAccount = ref(\r\n  localStorage.getItem(\"activeAccount\")\r\n)\r\nconst activeProject = ref(0)\r\n\r\n\r\nconst setShow = async () => {\r\n  if (typeof window !== \"undefined\") {\r\n    if (user !== null && user !== undefined) {\r\n      let local_data = localStorage.getItem(\"user\");\r\n      user.userName = JSON.parse(local_data).userName;\r\n      user.userType = JSON.parse(local_data).userType;\r\n      // time();\r\n      // console.log('users value', user.value.userName);\r\n    }\r\n  }\r\n};\r\n\r\nconst setProjects = async () => {\r\n  const { data: data } = await useFetch(\r\n    `${config.API_BASE_URL}projects/all?AccountId=${activeAccount.value}`\r\n  )\r\n  projects.value = data.value\r\n  activeProject.value = localStorage.getItem('activeProject') ? parseInt(localStorage.getItem('activeProject')) : projects.value[0].id\r\n  localStorage.setItem('activeProject', activeProject.value)\r\n}\r\n\r\nconst setActiveProject = (index) => {\r\n  showProjectsList.value = false;\r\n  activeProject.value = index\r\n  localStorage.setItem('activeProject', JSON.stringify(activeProject.value))\r\n  const router = useRouter()\r\n  router.go()\r\n}\r\n\r\nonBeforeMount(setProjects);\r\nonBeforeMount(setShow);\r\nonMounted(() => {\r\n  document.addEventListener(\"click\", function(evt) {\r\n        let projectEl = document.getElementById('project-selector'),\r\n          targetEl = evt.target; // clicked element      \r\n        do {\r\n          if(targetEl == projectEl) {\r\n            // This is a click inside, does nothing, just return.\r\n            return;\r\n          }\r\n          // Go up the DOM\r\n          targetEl = targetEl.parentNode;\r\n        } while (targetEl);\r\n        // This is a click outside.\r\n        showProjectsList.value = false\r\n      });\r\n  setShow()\r\n  // const route = useRoute()\r\n  // if((user.userType !== 'Administrator' || user.userType !== 'administrator') && route.path.includes('admin-settings')){\r\n  //   const router = useRouter()\r\n  //   router.push('/dashboard')\r\n  // }\r\n}\r\n  );\r\n\r\n// const time = () => {\r\n//     const today = new Date();\r\n//     // const date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate();\r\n//     const time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\r\n//     // const dateTime = date + ' ' + time;\r\n//     user.currentTime = time;\r\n// }\r\n\r\nconst downloadDb = () => {\r\n  const link = document.createElement(\"a\");\r\n  link.href = `${config.API_BASE_URL}files/sometraffic.sql`;\r\n  link.download = full_db_name;\r\n  link.target = \"_blank\";\r\n  link.click();\r\n};\r\n\r\nconst logout = async () => {\r\n  // let x = confirm('Are you sure!')\r\n  // if(x){\r\n  //     localStorage.clear();\r\n  //     navigateTo('/login');\r\n  // }\r\n\r\n  localStorage.clear();\r\n  navigateTo(\"/\");\r\n  await AWN.success(\"You Logout From System!\");\r\n};\r\n\r\nconst handleLogout = async () => {\r\n  shouldShowDialog.value = true;\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.download-db:hover {\r\n  cursor: pointer;\r\n}\r\n</style>"],"names":["_sfc_main"],"mappings":";;;;;;;;;;;;;;;;;;;;AAKE,MAAKA,cAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,MAAM,IAAI,KAAM,EAAC,mBAAoB;AAAA;EAExC;AAAA,EAED,UAAU;AACR,gBAAY,MAAM;AAChB,WAAK,OAAO,IAAI,KAAM,EAAC,mBAAkB;AAAA,IAC1C,GAAE,GAAI;AAAA,EACR;;;wDAfO,MAAI,IAAA;;;;;;;;;;;;;;ACoThB,UAAA,MAAA,OAAA,MAAA;AACA,qBAAA;AAEA,UAAA,mBAAA,IAAA,KAAA;AACA,UAAA,mBAAA,IAAA,KAAA;AACA,UAAA,OAAA,SAAA;AAAA,MACA,UAAA;AAAA,MACA,UAAA;AAAA,MACA,aAAA;AAAA,IACA,CAAA;AACA,WAAA,IAAA,KAAA,CAAA,EAAA,OAAA,kBAAA;AAEA,UAAA,WAAA,IAAA,EAAA;AACA;AAAA,MACA,aAAA,QAAA,eAAA;AAAA,IACA;AACA,UAAA,gBAAA,IAAA,CAAA;AA0EA,UAAA,SAAA,YAAA;AAOA,mBAAA,MAAA;AACA,iBAAA,GAAA;AACA,YAAA,IAAA,QAAA,yBAAA;AAAA,IACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}
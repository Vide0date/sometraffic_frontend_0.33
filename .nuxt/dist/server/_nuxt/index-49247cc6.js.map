{"version":3,"file":"index-49247cc6.js","sources":["../../../../pages/click-list/index.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div id=\"click_data\" class=\"shadow sm:rounded-md\">\r\n      <div class=\"flex justify-between\">\r\n        <h1 class=\"font-bold py-4 uppercase\">Click list</h1>\r\n        <div class=\"flex items-start\">\r\n          <div class=\"flex border-2 rounded border-blue-600\">\r\n            <div class=\"relative\">\r\n              <input\r\n                type=\"text\"\r\n                v-model=\"search.vaClDa\"\r\n                class=\"px-4 py-2 w-80 border-inherit bg-inherit pr-9 focus:outline-none focus:ring focus:border-blue-600\"\r\n                placeholder=\"Search...\"\r\n              />\r\n              <!-- <div class=\"absolute inset-y-0 right-0\"> -->\r\n              <button\r\n                class=\"absolute inset-y-0 right-0 px-2\"\r\n                @click=\"(event) => empty()\"\r\n              >\r\n                <svg\r\n                  xmlns=\"http://www.w3.org/2000/svg\"\r\n                  fill=\"none\"\r\n                  viewBox=\"0 0 24 24\"\r\n                  stroke-width=\"1.5\"\r\n                  stroke=\"currentColor\"\r\n                  class=\"w-6 h-6\"\r\n                >\r\n                  <path\r\n                    stroke-linecap=\"round\"\r\n                    stroke-linejoin=\"round\"\r\n                    d=\"M6 18L18 6M6 6l12 12\"\r\n                  />\r\n                </svg>\r\n              </button>\r\n              <!-- </div> -->\r\n            </div>\r\n\r\n            <button\r\n              class=\"flex items-center justify-center px-4 border-l bg-blue-700\"\r\n              @click=\"(event) => searched()\"\r\n            >\r\n              <svg\r\n                class=\"w-6 h-6 text-slate-50\"\r\n                fill=\"currentColor\"\r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n                viewBox=\"0 0 24 24\"\r\n              >\r\n                <path\r\n                  d=\"M16.32 14.9l5.39 5.4a1 1 0 0 1-1.42 1.4l-5.38-5.38a8 8 0 1 1 1.41-1.41zM10 16a6 6 0 1 0 0-12 6 6 0 0 0 0 12z\"\r\n                />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"flex items-center justify-center\"></div>\r\n      <div class=\"overflow-x-auto\">\r\n        <table class=\"w-full whitespace-nowrap\">\r\n          <thead class=\"bg-black/60\">\r\n            <tr>\r\n              <th class=\"text-left py-3 px-2\">Tracking URL</th>\r\n              <th class=\"text-left py-3 px-2\">Task ID</th>\r\n              <th class=\"text-left py-3 px-2\">Device</th>\r\n              <th class=\"text-left py-3 px-2\">Date / Time</th>\r\n              <th class=\"text-left py-3 px-2\">Country</th>\r\n              <th class=\"text-left py-3 px-2\">City</th>\r\n              <th class=\"text-left py-3 px-2\">Referrer</th>\r\n              <!-- <th class=\"text-left py-3 px-2 rounded-r-lg\">Actions</th> -->\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr\r\n              class=\"border-b border-gray-700\"\r\n              v-for=\"clickdata in searchdatas\"\r\n              key=\"clickdata.id\"\r\n            >\r\n              <td class=\"py-3 px-2\">\r\n                <NuxtLink\r\n                  :to=\"`/tracking-url/${clickdata?.Redirect?.id}`\"\r\n                  title=\"Edit\"\r\n                  class=\"hover:text-white\"\r\n                  >{{ clickdata?.Redirect?.tracking_url.slice(-7) }}</NuxtLink\r\n                >\r\n              </td>\r\n              <td class=\"py-3 px-2\">\r\n                <NuxtLink\r\n                  :to=\"`/click-list/detail/${clickdata?.task_id}`\"\r\n                  title=\"Edit\"\r\n                  class=\"hover:text-white\"\r\n                  >{{ clickdata?.task_id }}</NuxtLink\r\n                >\r\n              </td>\r\n              <td class=\"py-3 px-2\">{{ clickdata?.device }}</td>\r\n              <td class=\"py-3 px-2\">\r\n                {{ formatDate(clickdata?.timestamp, \"YYYY-MM-DD H:m\") }}\r\n              </td>\r\n              <td class=\"py-3 px-2\">{{ clickdata?.country }}</td>\r\n              <td class=\"py-3 px-2\">{{ clickdata?.city }}</td>\r\n              <td class=\"py-3 px-2\">{{ clickdata?.referrer_url }}</td>\r\n              <!-- <td class=\"py-3 px-2\">\r\n                                <div class=\"inline-flex items-center space-x-3\">\r\n                                    <span @click=\"(event) => destroyClickData(clickdata.id)\" title=\"Delete\"\r\n                                        class=\"hover:text-white\">\r\n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\"\r\n                                            stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-6 h-6\">\r\n                                            <path stroke-linecap=\"round\" stroke-linejoin=\"round\"\r\n                                                d=\"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0\" />\r\n                                        </svg>\r\n\r\n                                    </span>\r\n                                </div>\r\n                            </td> -->\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport moment from \"moment-timezone\";\r\ndefinePageMeta({\r\n  middleware: [\"auth\"],\r\n});\r\nconst AWN = inject(\"$awn\");\r\nconst clickdatas = ref([]);\r\nconst searchdatas = ref([]);\r\nconst search = reactive({\r\n  vaClDa: \"\",\r\n});\r\n\r\nconst config = useRuntimeConfig();\r\n\r\nconst empty = () => {\r\n  search.vaClDa = \"\";\r\n  searchdatas.value = clickdatas.value;\r\n};\r\nconst searched = () => {\r\n  searchdatas.value = clickdatas?._value?.filter((row) => {\r\n    return (\r\n      row?.task_id?.includes(search.vaClDa) ||\r\n      row.Redirect?.tracking_url\r\n        ?.toString()\r\n        ?.toLowerCase()\r\n        ?.includes(search.vaClDa) ||\r\n      row.ip_address?.includes(search.vaClDa) ||\r\n      row.screen_resolution?.includes(search.vaClDa) ||\r\n      row.network_speed?.includes(search.vaClDa) ||\r\n      row.latitude?.includes(search.vaClDa) ||\r\n      row.longtitude?.includes(search.vaClDa) ||\r\n      row.zipcode?.includes(search.vaClDa) ||\r\n      row.timestamp?.includes(search.vaClDa) ||\r\n      formatDate(row?.timestamp, \"H:m\")?.includes(search.vaClDa) ||\r\n      row?.device\r\n        ?.toString()\r\n        ?.toLowerCase()\r\n        ?.includes(search.vaClDa?.toString()?.toLowerCase()) ||\r\n      row?.referrer_url\r\n        ?.toString()\r\n        ?.toLowerCase()\r\n        ?.includes(search.vaClDa?.toString()?.toLowerCase()) ||\r\n      row?.country\r\n        ?.toString()\r\n        ?.toLowerCase()\r\n        ?.includes(search.vaClDa?.toString()?.toLowerCase()) ||\r\n      row?.country_code\r\n        ?.toString()\r\n        ?.toLowerCase()\r\n        ?.includes(search.vaClDa?.toString()?.toLowerCase()) ||\r\n      row?.region\r\n        ?.toString()\r\n        ?.toLowerCase()\r\n        ?.includes(search.vaClDa?.toString()?.toLowerCase()) ||\r\n      row?.region_name\r\n        ?.toString()\r\n        ?.toLowerCase()\r\n        ?.includes(search.vaClDa?.toString()?.toLowerCase()) ||\r\n      row?.operating_system\r\n        ?.toString()\r\n        ?.toLowerCase()\r\n        ?.includes(search.vaClDa?.toString()?.toLowerCase()) ||\r\n      row?.browser\r\n        ?.toString()\r\n        ?.toLowerCase()\r\n        ?.includes(search.vaClDa?.toString()?.toLowerCase()) ||\r\n      row?.browser_language\r\n        ?.toString()\r\n        ?.toLowerCase()\r\n        ?.includes(search.vaClDa?.toString()?.toLowerCase()) ||\r\n      row?.ip_lookup_status\r\n        ?.toString()\r\n        ?.toLowerCase()\r\n        ?.includes(search.vaClDa?.toString()?.toLowerCase()) ||\r\n      row?.isp\r\n        ?.toString()\r\n        ?.toLowerCase()\r\n        ?.includes(search.vaClDa?.toString()?.toLowerCase()) ||\r\n      row?.connection_type\r\n        ?.toString()\r\n        ?.toLowerCase()\r\n        ?.includes(search.vaClDa?.toString()?.toLowerCase()) ||\r\n      row?.city\r\n        ?.toString()\r\n        ?.toLowerCase()\r\n        ?.includes(search.vaClDa?.toString()?.toLowerCase())\r\n    );\r\n  });\r\n};\r\nconst formatDate = (dateString, formatString) => {\r\n  const date = new Date(dateString);\r\n  return moment(date).format(formatString);\r\n};\r\n\r\nconst setClickDatas = async () => {\r\n  const { data: data } = await useFetch(`${config.API_BASE_URL}clickdata/all`);\r\n  clickdatas.value = data.value;\r\n  searchdatas.value = data.value;\r\n};\r\n\r\nonBeforeMount(setClickDatas);\r\n\r\n// const destroyClickData = async (id) => {\r\n\r\n//     let onOk = async () => {\r\n//         const { data, error } = await useFetch(`${config.API_BASE_URL}clickdata/delete/${id}`, {\r\n//             method: 'GET',\r\n//             params: { id: id },\r\n//         })\r\n//         if (data.value) {\r\n//             // console.log('data value', data.value.message);\r\n//             await AWN.success(data.value.message);\r\n//         }\r\n//         if (error.value) {\r\n//             await AWN.alert(error.value.statusMessage);\r\n//         }\r\n//         await setClickDatas()\r\n//     };\r\n//     let onCancel = () => { AWN.info('You pressed Cancel') };\r\n//     AWN.confirm(\r\n//         'Are you sure?',\r\n//         onOk,\r\n//         onCancel,\r\n//         {\r\n//             labels: {\r\n//                 confirm: 'You can undo it!'\r\n//             }\r\n//         }\r\n//     )\r\n// }\r\n</script>\r\n\r\n<style scoped></style>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AA6HA,WAAA,MAAA;AACA,QAAA,EAAA;AACA,UAAA,cAAA,IAAA,CAAA,CAAA;AACA,UAAA,SAAA,SAAA;AAAA,MACA,QAAA;AAAA,IACA,CAAA;AAEA,qBAAA;AA6EA,UAAA,aAAA,CAAA,YAAA,iBAAA;AACA,YAAA,OAAA,IAAA,KAAA,UAAA;AACA,aAAA,OAAA,IAAA,EAAA,OAAA,YAAA;AAAA,IACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}
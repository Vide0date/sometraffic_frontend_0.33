{"version":3,"file":"index-6ab814e7.js","sources":["../../../../pages/tracking-url/index.vue"],"sourcesContent":["<template>\n  <div>\n    <div id=\"tracking_url\" class=\"shadow sm:rounded-md\">\n      <Modal\n        title=\"You can NOT undo this action\"\n        modalClass=\"confirm-modal\"\n        v-model:visible=\"shouldShowDialog\"\n        :cancelButton=\"{ text: 'Cancel' }\"\n        :okButton=\"{ text: 'Okay', onclick: () => handleDelete() }\"\n      >\n        <div class=\"text\">Are you sure?</div>\n      </Modal>\n\n      <div class=\"flex justify-between\">\n        <h1 class=\"font-bold py-4 uppercase\">Traking URL list</h1>\n        <div class=\"flex flex-row justify-between basis-1/2\">\n          <div class=\"basis-4/5\">\n            <input\n              type=\"text\"\n              v-model=\"search.vaTrURL\"\n              id=\"search\"\n              class=\"bg-[#dddddd] h-10 py-2 px-3 text-gray-900 mt-1 w-full rounded-md border-gray-300 shadow-sm focus:border-gray-800 focus:ring-indigo-500 sm:text-sm\"\n              placeholder=\"Search\"\n            />\n          </div>\n        </div>\n        <h1 class=\"pt-3 pr-4\">\n          <NuxtLink to=\"tracking-url/add\" title=\"Add\">\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              fill=\"none\"\n              viewBox=\"0 0 24 24\"\n              stroke-width=\"1.5\"\n              stroke=\"currentColor\"\n              class=\"w-6 h-6\"\n            >\n              <path\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n                d=\"M12 4.5v15m7.5-7.5h-15\"\n              />\n            </svg>\n          </NuxtLink>\n        </h1>\n      </div>\n\n      <div class=\"overflow-x-auto\">\n        <table class=\"w-full whitespace-nowrap\">\n          <thead class=\"bg-black/60\">\n            <tr>\n              <th class=\"text-left py-3 px-2 rounded-l-lg\">ID</th>\n              <th class=\"text-left py-3 px-2\">Tracking URL</th>\n              <th class=\"text-left py-3 px-2\">Destination</th>\n              <th class=\"text-left py-3 px-2\">Task ID</th>\n              <th class=\"text-left py-3 px-2 rounded-r-lg\">Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr\n              class=\"border-b border-gray-700\"\n              v-for=\"tr_url in tracking_urls?.filter((row) => {\n                return (\n                  row.tracking_url.includes(search.vaTrURL) ||\n                  row.destination_url.includes(search.vaTrURL) ||\n                  row.task_id.includes(search.vaTrURL)\n                );\n              })\"\n              key=\"tracking_url.id\"\n            >\n              <td class=\"py-3 px-2 font-bold\">{{ tr_url.id }}</td>\n              <td class=\"py-3 px-2\">\n                <NuxtLink\n                  :to=\"`/tracking-url/${tr_url.id}`\"\n                  title=\"Edit\"\n                  class=\"hover:text-white\"\n                >\n                  {{ tr_url.tracking_url }}\n                </NuxtLink>\n\n                <!-- <a :href=\"tr_url.tracking_url\" target=\"_blank\" rel=\"noopener noreferrer\">{{ tr_url.tracking_url }}</a> -->\n              </td>\n              <td class=\"py-3 px-2\">\n                <div className=\"ml-1 inline-block w-[350px]\">\n                  <span className=\"font-semibold truncate block\">\n                    {{ tr_url.destination_url }}\n                    <!-- <a\n                      :href=\"\n                        tr_url.destination_url?.includes('http')\n                          ? tr_url.destination_url\n                          : 'http://' + tr_url.destination_url\n                      \"\n                      >{{ tr_url.destination_url }}\n                    </a> -->\n                  </span>\n                </div>\n              </td>\n              <td class=\"py-3 px-2\">{{ tr_url.task_id }}</td>\n              <td class=\"py-3 px-2\">\n                <div class=\"inline-flex items-center space-x-3\">\n                  <NuxtLink\n                    :to=\"`/tracking-url/${tr_url.id}`\"\n                    title=\"Edit\"\n                    class=\"hover:text-white\"\n                    ><svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      fill=\"none\"\n                      viewBox=\"0 0 24 24\"\n                      stroke-width=\"1.5\"\n                      stroke=\"currentColor\"\n                      class=\"w-5 h-5\"\n                    >\n                      <path\n                        stroke-linecap=\"round\"\n                        stroke-linejoin=\"round\"\n                        d=\"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10\"\n                      />\n                    </svg>\n                  </NuxtLink>\n\n                  <span\n                    @click=\"(event) => destroy(tr_url.id)\"\n                    title=\"Delete\"\n                    class=\"hover:text-white\"\n                  >\n                    <svg\n                      xmlns=\"http://www.w3.org/2000/svg\"\n                      fill=\"none\"\n                      viewBox=\"0 0 24 24\"\n                      stroke-width=\"1.5\"\n                      stroke=\"currentColor\"\n                      class=\"w-6 h-6\"\n                    >\n                      <path\n                        stroke-linecap=\"round\"\n                        stroke-linejoin=\"round\"\n                        d=\"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0\"\n                      />\n                    </svg>\n                  </span>\n                </div>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { Modal } from \"usemodal-vue3\";\n\ndefinePageMeta({\n  middleware: [\"auth\"],\n});\n\nconst AWN = inject(\"$awn\");\n\nconst shouldShowDialog = ref(false);\nconst tracking_urls = ref([]);\nconst search = reactive({\n  vaTrURL: \"\",\n  vaClDa: \"\",\n});\n\nconst config = useRuntimeConfig();\n\nconst setTrackingURLs = async () => {\n  const { data: data } = await useFetch(\n    `${config.API_BASE_URL}trackingurl/all`\n  );\n  tracking_urls.value = data.value;\n};\n\nconst handleDelete = async () => {\n  const id = localStorage.getItem(\"sometraffic_delete_trackingurl\");\n  const { data, error } = await useFetch(\n    `${config.API_BASE_URL}trackingurl/delete/${id}`,\n    {\n      method: \"GET\",\n      params: { id: id },\n    }\n  );\n  if (data.value) {\n    shouldShowDialog.value = false;\n    await AWN.success(data.value.message);\n  }\n  if (error.value) {\n    shouldShowDialog.value = false;\n    await AWN.alert(error.value.statusMessage);\n  }\n\n  localStorage.removeItem(\"sometraffic_delete_trackingurl\");\n  await setTrackingURLs();\n};\n\nconst destroy = async (id) => {\n  shouldShowDialog.value = true;\n  localStorage.setItem(\"sometraffic_delete_trackingurl\", id);\n};\n\nonBeforeMount(setTrackingURLs);\n</script>\n\n<style scoped></style>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AA4JA,UAAA,MAAA,OAAA,MAAA;AAEA,UAAA,mBAAA,IAAA,KAAA;AACA,UAAA,gBAAA,IAAA,CAAA,CAAA;AACA,UAAA,SAAA,SAAA;AAAA,MACA,SAAA;AAAA,MACA,QAAA;AAAA,IACA,CAAA;AAEA,UAAA,SAAA,iBAAA;AAEA,UAAA,kBAAA,YAAA;AACA,YAAA,EAAA,KAAA,IAAA,MAAA;AAAA,QACA,GAAA,OAAA;AAAA,QACA;AAAA,MAAA;AACA,oBAAA,QAAA,KAAA;AAAA,IACA;AAEA,UAAA,eAAA,YAAA;AACA,YAAA,KAAA,aAAA,QAAA,gCAAA;AACA,YAAA,EAAA,MAAA,MAAA,IAAA,MAAA;AAAA,QACA,GAAA,OAAA,kCAAA;AAAA,QACA;AAAA,UACA,QAAA;AAAA,UACA,QAAA,EAAA,GAAA;AAAA,QACA;AAAA,QACA;AAAA,MAAA;AACA,UAAA,KAAA,OAAA;AACA,yBAAA,QAAA;AACA,cAAA,IAAA,QAAA,KAAA,MAAA,OAAA;AAAA,MACA;AACA,UAAA,MAAA,OAAA;AACA,yBAAA,QAAA;AACA,cAAA,IAAA,MAAA,MAAA,MAAA,aAAA;AAAA,MACA;AAEA,mBAAA,WAAA,gCAAA;AACA,YAAA,gBAAA;AAAA,IACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}
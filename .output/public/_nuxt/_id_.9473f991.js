import{H as T,T as A,M as j}from"./components.75a80afc.js";import{_ as q}from"./Loader.7824c07a.js";import{l as C,a0 as F,a as N,r as v,b as L,w as k,S as M,e as w,u as o,c as V,f as x,h as S,i as d,j as n,P as $,o as p,m as D,t as H}from"./entry.8e5da200.js";import{u as P}from"./fetch.a9f9866d.js";import"./composables.f42ffe09.js";const U={class:"w-screen h-screen rounded-xl p-8 flex justify-center m-auto"},I={class:"space-y-8 flex justify-center m-auto object-center"},O={key:0,class:"inline-flex tracking"},W={__name:"[id]",async setup(G){let s,c;const l=C();F();const i=N(),u=l.params,f=l.query,t=v([]),a=v(""),R=L({redirect_flaq:!1}),m=i.BASE_URL+l.fullPath,_=m.split("?")[0];return console.log("Full Path: ",m),u.id&&u.id.length===7&&(f.fbclid?console.log("Save it."):(console.log("Redirect it or show preview or do nothing."),[s,c]=k(()=>P(`${i.API_BASE_URL}trackingurl/get-meta`,{method:"POST",body:{tracking_url:_}},"$Yr6aDRXGgk").then(e=>{e.data.value&&(t.value=e.data.value,a.value=e.data.value[0].destination_url,(!a.value.includes("http")||!a.value.includes("https"))&&(a.value="https://"+a.value)),e.error.value&&console.log("Error no result",e.error)}).catch(e=>{console.log("Error useFetch: ",e)})),await s,c()),console.log("Redirect: ",t)),[s,c]=k(()=>P(`${i.API_BASE_URL}trackingurl/redirect`,{method:"POST",body:{id:u.id,tracking_url:_,screen_resolution:"unknownxunknown",network_speed:"",referrer_url:f.fbclid?"https://facebook.com":""}},"$PNCP5poDuj").then(e=>{}).catch(e=>{console.log("Error useFetch: ",e)})),await s,c(),M(()=>{window.location.assign(a.value)}),(e,X)=>{var g;const b=A,r=j,B=T,E=q;return p(),w($,null,[((g=o(t))==null?void 0:g.length)>0?(p(),V(B,{key:0},{default:x(()=>{var h;return[n(b,null,{default:x(()=>{var y;return[D("Some Traffic | "+H((y=o(t)[0])==null?void 0:y.seo_title),1)]}),_:1}),n(r,{property:"og:title",content:(h=o(t)[0])==null?void 0:h.seo_title},null,8,["content"]),n(r,{property:"og:description",content:o(t)[0].seo_description},null,8,["content"]),n(r,{property:"og:image",content:o(t)[0].seo_image_url},null,8,["content"]),n(r,{property:"og:url",content:o(_)},null,8,["content"]),n(r,{property:"og:type",content:"Some traffic web app"})]}),_:1})):S("",!0),d("div",null,[d("div",U,[d("div",I,[o(R).redirect_flaq==!0?(p(),w("span",O,[n(E)])):S("",!0)])])])],64)}}};export{W as default};

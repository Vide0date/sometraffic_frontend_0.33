import{a as w,r as i,x as k,R as y,e as r,i as t,u as n,t as m,S as g,D as A,T as C,O as D,P as E,j as S,f as $,k as B,Q as I,o as d,F as f,m as L,U as R}from"./entry.0274415f.js";import{u as T}from"./fetch.c1d5b42f.js";import{m as N}from"./index.cf510b55.js";const M={class:"flex flex-col"},P=t("div",{class:"flex mb-4"},[t("h1",{class:"font-bold"},"Admin settings")],-1),j=t("hr",null,null,-1),V={class:"flex flex-col mt-4 p-8 gap-y-4"},Y=t("label",{for:"download"},"Backup database",-1),F=t("hr",{class:"border-gray-300"},null,-1),U=t("label",null,"Account",-1),z=t("hr",{class:"border-gray-300"},null,-1),H={class:"flex"},O={class:"basis-2/5"},q={id:"account-selector",class:"relative"},J={type:"button"},Q=t("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Capa_1",x:"0px",y:"0px",width:"24px",height:"14px",viewBox:"0 0 960 560","enable-background":"new 0 0 960 560","xml:space":"preserve"},[t("g",{id:"Rounded_Rectangle_33_copy_4_1_"},[t("path",{d:"M480,344.181L268.869,131.889c-15.756-15.859-41.3-15.859-57.054,0c-15.754,15.857-15.754,41.57,0,57.431l237.632,238.937   c8.395,8.451,19.562,12.254,30.553,11.698c10.993,0.556,22.159-3.247,30.555-11.698l237.631-238.937   c15.756-15.86,15.756-41.571,0-57.431s-41.299-15.859-57.051,0L480,344.181z"})])],-1),G=[Q],K={class:"absolute overflow-y-auto max-h-96 -right-2 top-0 flex flex-col gap-y-4 bg-white rounded-md p-4 text-black"},W=["onClick"],X=t("hr",null,null,-1),Z=t("label",null,"Emails",-1),tt=t("hr",{class:"border-gray-300"},null,-1),ct={__name:"index",setup(et){const u=w(),v=`sometraffic-${N(new Date).format("YYYY-MM-DD-HH_mm")}`;B("$awn");const l=i([]),_=i(localStorage.getItem("activeAccount")),a=i(!1),p=e=>{a.value=!1;const o=l.value.find(s=>s.id===parseInt(e));localStorage.removeItem("activeProject"),localStorage.setItem("activeAccount",o.id),localStorage.setItem("activeAccountData",JSON.stringify(o)),R().go()},h=async()=>{const{data:e}=await T(`${u.API_BASE_URL}accounts/all`,"$TR2d2LceNf");l.value=e.value},b=()=>{const e=document.createElement("a");e.href=`${u.API_BASE_URL}files/sometraffic.sql`,e.download=v,e.target="_blank",e.click()};return k(h),y(()=>{document.addEventListener("click",function(e){let o=document.getElementById("account-selector"),c=e.target;do{if(c==o)return;c=c.parentNode}while(c);a.value=!1})}),(e,o)=>{const c=I;return d(),r("div",M,[P,j,t("div",V,[Y,F,t("button",{name:"download",class:"mb-8 text-black cursor-pointer w-fit px-4 py-2 rounded-md bg-gray-400 hover:bg-gray-600 transition",onClick:o[0]||(o[0]=s=>b())},"Download Database"),U,z,t("div",H,[t("div",O,[t("div",q,[t("div",{onClick:o[1]||(o[1]=s=>a.value=!n(a)),class:"rounded-md cursor-pointer relative flex bg-white p-3 w-3/5 text-black"},[t("button",J,m(n(l).length?n(l).find(s=>s.id==n(_))?n(l).find(s=>s.id==n(_)).name:"select account":""),1),t("span",{class:g([{"rotate-180":n(a)},"absolute right-3 top-1/2 -translate-y-1"])},G,2)]),A(t("div",K,[(d(!0),r(D,null,E(n(l),(s,x)=>(d(),r("div",{class:"flex flex-col gap-y-2",key:s.id},[t("button",{type:"button",onClick:st=>p(s.id)},m(s.name),9,W),t("hr",{class:g({"border-black":x+1===n(l).length})},null,2)]))),128)),t("button",{class:"text-center cursor-pointer",onClick:o[2]||(o[2]=s=>{("navigateTo"in e?e.navigateTo:n(f))("/accounts/add"),a.value=!1})},"+ Add an account"),X,t("button",{class:"text-center cursor-pointer",onClick:o[3]||(o[3]=s=>{("navigateTo"in e?e.navigateTo:n(f))("/accounts"),a.value=!1})},"View accounts list")],512),[[C,n(a)]])])])]),Z,tt,S(c,{to:"emails",class:"text-black cursor-pointer w-fit px-4 py-2 rounded-md bg-gray-400 hover:bg-gray-600 transition"},{default:$(()=>[L("Emails settings")]),_:1})])])}}};export{ct as default};
